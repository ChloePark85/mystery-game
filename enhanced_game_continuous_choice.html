<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>0ì˜ ì§‘í–‰ - Choose Your Own Adventure (Continuous Choice)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            font-family: 'Segoe UI', 'Noto Sans CJK KR', sans-serif;
            height: 100%;
            overflow: hidden;
        }

        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        .vn-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: #000;
        }

        /* í’€ìŠ¤í¬ë¦° ë°°ê²½ ì´ë¯¸ì§€ */
        .vn-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .vn-bg-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.8);
        }

        /* ì´ë¯¸ì§€ ì—†ì„ ë•Œ í…ìŠ¤íŠ¸ ë°°ê²½ */
        .text-only-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e1e2e 0%, #2d2d44 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1;
        }

        .text-only-content {
            color: #fff;
            font-size: 32px;
            text-align: center;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            max-width: 80%;
            line-height: 1.4;
        }

        /* ìƒë‹¨ í—¤ë” */
        .vn-header {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .vn-title {
            color: #fff;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .vn-progress {
            background: rgba(0,0,0,0.7);
            padding: 8px 15px;
            border-radius: 20px;
            color: #00ff88;
            font-size: 14px;
            border: 2px solid #00ff88;
        }

        /* ëŒ€í™”ì°½ */
        .vn-dialogue-container {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.8) 100%);
            padding: 30px 40px;
            z-index: 5;
            min-height: 250px;
        }

        .vn-dialogue-text {
            color: #fff;
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 25px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }

        .vn-speaker {
            color: #00ff88;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 16px;
        }

        /* ì„ íƒì§€ */
        .vn-choices {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .vn-choice {
            background: rgba(30, 30, 50, 0.9);
            border: 2px solid rgba(255,255,255,0.3);
            color: #fff;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
            text-align: left;
            position: relative;
            overflow: hidden;
        }

        .vn-choice:hover {
            background: rgba(0,255,136,0.3);
            border-color: #00ff88;
            transform: translateX(10px);
        }

        .vn-choice:before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: #00ff88;
            transform: scaleY(0);
            transition: transform 0.3s;
        }

        .vn-choice:hover:before {
            transform: scaleY(1);
        }

        /* íŠ¹ë³„í•œ ì„ íƒì§€ ìŠ¤íƒ€ì¼ */
        .choice-detective {
            border-left-color: #4dabf7;
        }

        .choice-conspiracy {
            border-left-color: #ff6b6b;
        }

        .choice-drama {
            border-left-color: #ffd43b;
        }

        .choice-action {
            border-left-color: #ff922b;
        }

        .choice-investigation {
            border-left-color: #339af0;
        }

        .choice-emotional {
            border-left-color: #f783ac;
        }

        /* ë©”ë‰´ ë²„íŠ¼ */
        .menu-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            z-index: 15;
        }

        .menu-toggle:hover {
            background: rgba(0,255,136,0.8);
        }

        /* ê²Œì„ ë©”ë‰´ */
        .vn-menu {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            z-index: 20;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .menu-content {
            background: rgba(20,20,40,0.95);
            padding: 40px;
            border-radius: 15px;
            border: 2px solid #00ff88;
            text-align: center;
            min-width: 400px;
        }

        .menu-title {
            color: #00ff88;
            font-size: 24px;
            margin-bottom: 30px;
        }

        .menu-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .menu-btn {
            background: rgba(0,255,136,0.2);
            border: 2px solid #00ff88;
            color: #fff;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }

        .menu-btn:hover {
            background: rgba(0,255,136,0.4);
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .vn-header {
                top: 10px;
                left: 10px;
                right: 10px;
            }

            .vn-title {
                font-size: 18px;
            }

            .vn-dialogue-container {
                padding: 20px;
                min-height: 200px;
            }

            .vn-dialogue-text {
                font-size: 16px;
            }

            .text-only-content {
                font-size: 24px;
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <div class="vn-container">
        <!-- ë°°ê²½ (ì´ë¯¸ì§€ ë˜ëŠ” í…ìŠ¤íŠ¸) -->
        <div class="vn-background" id="vnBackground">
            <img id="vnBgImage" class="vn-bg-image" style="display: none;" alt="ë°°ê²½">
            <div id="textOnlyBg" class="text-only-background" style="display: none;">
                <div class="text-only-content" id="textOnlyContent"></div>
            </div>
        </div>

        <!-- ìƒë‹¨ í—¤ë” -->
        <div class="vn-header">
            <div class="vn-title">0ì˜ ì§‘í–‰</div>
            <div class="vn-progress" id="vnProgress">ì¥ë©´ 1 / 51</div>
        </div>

        <!-- ë©”ë‰´ ë²„íŠ¼ -->
        <button class="menu-toggle" onclick="showMenu()">ë©”ë‰´</button>

        <!-- ëŒ€í™”ì°½ -->
        <div class="vn-dialogue-container">
            <div class="vn-speaker" id="vnSpeaker">ì‹œì‘</div>
            <div class="vn-dialogue-text" id="vnDialogue">
                2045ë…„, ë„¤ì˜¤ ì„œìš¸. ì‚¬ì´ë²„ë³´ì•ˆ ì—°êµ¬ì†Œì—ì„œ ê°•ë°•ì‚¬ì˜ ì‹œì²´ê°€ ë°œê²¬ë˜ì—ˆë‹¤.
            </div>
            <div class="vn-choices" id="vnChoices">
                <div class="vn-choice" onclick="makeChoice(0)">í˜„ì¥ì„ ìì„¸íˆ ì‚´í´ë³¸ë‹¤</div>
                <div class="vn-choice" onclick="makeChoice(1)">ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ ì§ˆë¬¸í•œë‹¤</div>
                <div class="vn-choice" onclick="makeChoice(2)">ë³´ì•ˆ ì‹œìŠ¤í…œì„ í™•ì¸í•œë‹¤</div>
            </div>
        </div>

        <!-- ê²Œì„ ë©”ë‰´ -->
        <div class="vn-menu" id="vnMenu">
            <div class="menu-content">
                <div class="menu-title">ê²Œì„ ë©”ë‰´</div>
                <div class="menu-buttons">
                    <button class="menu-btn" onclick="saveGame()">ê²Œì„ ì €ì¥</button>
                    <button class="menu-btn" onclick="loadGame()">ê²Œì„ ë¶ˆëŸ¬ì˜¤ê¸°</button>
                    <button class="menu-btn" onclick="resetGame()">ì²˜ìŒë¶€í„°</button>
                    <button class="menu-btn" onclick="hideMenu()">ëŒì•„ê°€ê¸°</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ê²Œì„ ìƒíƒœ
        let gameState = {
            currentScene: 1,
            choiceHistory: [],
            visitedScenes: [],
            playerName: "íƒì •"
        };

        // ëª¨ë“  ê²Œì„ ì”¬ ë°ì´í„° (ë§¤ë²ˆ ì„ íƒì§€ê°€ ìˆìŒ)
        const gameScenes = {
            1: {
                speaker: "ë‚˜ë ˆì´ì…˜",
                text: "2045ë…„, ë„¤ì˜¤ ì„œìš¸. ì‚¬ì´ë²„ë³´ì•ˆ ì—°êµ¬ì†Œì—ì„œ ê°•ë°•ì‚¬ì˜ ì‹œì²´ê°€ ë°œê²¬ë˜ì—ˆë‹¤.",
                image: "scene_01.png",
                choices: [
                    { text: "ğŸ” í˜„ì¥ì„ ìì„¸íˆ ì‚´í´ë³¸ë‹¤", next: 2 },
                    { text: "ğŸ‘¥ ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ ì§ˆë¬¸í•œë‹¤", next: 3 },
                    { text: "ğŸ’» ë³´ì•ˆ ì‹œìŠ¤í…œì„ í™•ì¸í•œë‹¤", next: 4 }
                ]
            },
            2: {
                speaker: "íƒì •",
                text: "í˜„ì¥ì€ ë°€ì‹¤ì´ì—ˆë‹¤. ë¬¸ì€ ì•ˆìª½ì—ì„œ ì ê²¨ ìˆê³ , ì°½ë¬¸ë„ ë°€íë˜ì–´ ìˆë‹¤.",
                image: "scene_02.png",
                choices: [
                    { text: "ğŸ”¬ ê³¼í•™ì  ì¦ê±°ë¥¼ ìˆ˜ì§‘í•œë‹¤", next: 5, style: "choice-detective" },
                    { text: "ğŸ¤” ì‹¬ë¦¬ì  ë™ê¸°ë¥¼ ìƒê°í•´ë³¸ë‹¤", next: 6, style: "choice-drama" },
                    { text: "ğŸ•µï¸ ìˆ¨ê²¨ì§„ ì¶œì…êµ¬ë¥¼ ì°¾ëŠ”ë‹¤", next: 7, style: "choice-conspiracy" }
                ]
            },
            3: {
                speaker: "ë™ë£Œ",
                text: "ê°•ë°•ì‚¬ëŠ” ìµœê·¼ ë§¤ìš° ë¶ˆì•ˆí•´í•˜ì…¨ì–´ìš”. ëˆ„êµ°ê°€ë¥¼ ê²½ê³„í•˜ëŠ” ê²ƒ ê°™ì•˜ìŠµë‹ˆë‹¤.",
                image: "scene_03.png",
                choices: [
                    { text: "â“ ëˆ„êµ¬ë¥¼ ê²½ê³„í–ˆëŠ”ì§€ ìì„¸íˆ ë¬»ëŠ”ë‹¤", next: 8 },
                    { text: "ğŸ“… ì–¸ì œë¶€í„° ì´ìƒí–ˆëŠ”ì§€ í™•ì¸í•œë‹¤", next: 9 },
                    { text: "ğŸ’¼ ìµœê·¼ ì—°êµ¬ ë‚´ìš©ì— ëŒ€í•´ ë¬»ëŠ”ë‹¤", next: 10 }
                ]
            },
            4: {
                speaker: "ë³´ì•ˆ ë‹´ë‹¹ì",
                text: "ì–´ì ¯ë°¤ 11ì‹œ 32ë¶„ì— ê°•ë°•ì‚¬ê°€ ì—°êµ¬ì‹¤ì— ë“¤ì–´ê°€ì‹  í›„ ì•„ë¬´ë„ ë‚˜ì˜¤ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.",
                image: "scene_04.png",
                choices: [
                    { text: "ğŸ“¹ CCTV ì˜ìƒì„ ìì„¸íˆ ë³¸ë‹¤", next: 11 },
                    { text: "ğŸ” ì¶œì… ê¸°ë¡ì„ í™•ì¸í•œë‹¤", next: 12 },
                    { text: "ğŸš¨ ë‹¤ë¥¸ ë³´ì•ˆ ì‹œìŠ¤í…œì€ ì–´ë–¤ì§€ ë¬»ëŠ”ë‹¤", next: 13 }
                ]
            },
            5: {
                speaker: "íƒì •",
                text: "í˜„ë¯¸ê²½ìœ¼ë¡œ ì‚´í´ë³´ë‹ˆ ì´ìƒí•œ ì„¬ìœ ì§ˆê³¼ ê¸ˆì† ì¡°ê°ì´ ë°œê²¬ë˜ì—ˆë‹¤.",
                image: "detective_01.png",
                choices: [
                    { text: "ğŸ”¬ ì„¬ìœ ì§ˆì„ ë¶„ì„í•œë‹¤", next: 14, style: "choice-investigation" },
                    { text: "âš™ï¸ ê¸ˆì† ì¡°ê°ì„ ì¡°ì‚¬í•œë‹¤", next: 15, style: "choice-investigation" },
                    { text: "ğŸ§ª í™”í•™ ì„±ë¶„ì„ í…ŒìŠ¤íŠ¸í•œë‹¤", next: 16, style: "choice-investigation" }
                ]
            },
            6: {
                speaker: "íƒì •",
                text: "ê°•ë°•ì‚¬ì˜ í‘œì •ì´ í‰ì˜¨í•´ ë³´ì¸ë‹¤. ìŠ¤ìŠ¤ë¡œ ëª©ìˆ¨ì„ ëŠì—ˆì„ê¹Œ?",
                image: "drama_01.png",
                choices: [
                    { text: "ğŸ’” ìì‚´ ê°€ëŠ¥ì„±ì„ ê³ ë ¤í•œë‹¤", next: 17, style: "choice-emotional" },
                    { text: "ğŸ˜° ë‹¤ë¥¸ ê°ì • ìƒíƒœë¥¼ ìƒê°í•œë‹¤", next: 18, style: "choice-emotional" },
                    { text: "ğŸ¤ ì¸ê°„ê´€ê³„ë¥¼ ì¡°ì‚¬í•œë‹¤", next: 19, style: "choice-emotional" }
                ]
            },
            7: {
                speaker: "íƒì •",
                text: "ë²½ì„ ë‘ë“œë ¤ë³´ë‹ˆ í•œ ê³³ì—ì„œ ì´ìƒí•œ ì†Œë¦¬ê°€ ë‚œë‹¤. ìˆ¨ê²¨ì§„ ê³µê°„ì´ ìˆì„ê¹Œ?",
                image: "conspiracy_01.png",
                choices: [
                    { text: "ğŸ”¨ ë²½ì„ ë¶€ìˆœë‹¤", next: 20, style: "choice-action" },
                    { text: "ğŸ” ìˆ¨ê²¨ì§„ ìŠ¤ìœ„ì¹˜ë¥¼ ì°¾ëŠ”ë‹¤", next: 21, style: "choice-investigation" },
                    { text: "ğŸ“ ê±´ë¬¼ ì„¤ê³„ë„ë¥¼ í™•ì¸í•œë‹¤", next: 22, style: "choice-investigation" }
                ]
            },
            8: {
                speaker: "ë™ë£Œ",
                text: "ìµœê·¼ì— ì •ë¶€ ê´€ë ¨ ì‚¬ëŒë“¤ì´ ìì£¼ ë°©ë¬¸í–ˆì–´ìš”. ê°•ë°•ì‚¬ëŠ” ê·¸ë“¤ì„ ë§Œë‚˜ê³  ë‚˜ë©´ í•­ìƒ ì¹¨ìš¸í•´í–ˆìŠµë‹ˆë‹¤.",
                image: "scene_05.png",
                choices: [
                    { text: "ğŸ›ï¸ ì •ë¶€ ê´€ë ¨ìë“¤ì˜ ì •ì²´ë¥¼ ì•Œì•„ë³¸ë‹¤", next: 23, style: "choice-conspiracy" },
                    { text: "ğŸ“ ë§Œë‚¨ì˜ ëª©ì ì„ ì¶”ì¸¡í•´ë³¸ë‹¤", next: 24 },
                    { text: "ğŸ˜Ÿ ê°•ë°•ì‚¬ì˜ ê°ì • ë³€í™”ë¥¼ ë” ìì„¸íˆ ë¬»ëŠ”ë‹¤", next: 25, style: "choice-emotional" }
                ]
            },
            9: {
                speaker: "ë™ë£Œ",
                text: "í•œ ë‹¬ ì „ë¶€í„° ì´ìƒí–ˆì–´ìš”. ê·¸ë•Œ ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ê°€ ì‹œì‘ëœ ë•Œì™€ ê²¹ì¹©ë‹ˆë‹¤.",
                image: "scene_06.png",
                choices: [
                    { text: "ğŸ’¼ ìƒˆ í”„ë¡œì íŠ¸ê°€ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë³¸ë‹¤", next: 26 },
                    { text: "ğŸ“… ì •í™•í•œ ì‹œê¸°ë¥¼ í™•ì¸í•œë‹¤", next: 27 },
                    { text: "ğŸ‘¥ í”„ë¡œì íŠ¸ íŒ€ì›ë“¤ì„ ë§Œë‚˜ë³¸ë‹¤", next: 28 }
                ]
            },
            10: {
                speaker: "ë™ë£Œ",
                text: "ì¸ê³µì§€ëŠ¥ ë³´ì•ˆ ê´€ë ¨ ì—°êµ¬ì˜€ì–´ìš”. ì •ë¶€ ê¸°ë°€ í”„ë¡œì íŠ¸ë¼ê³  ë“¤ì—ˆìŠµë‹ˆë‹¤.",
                image: "scene_07.png",
                choices: [
                    { text: "ğŸ¤– AI ë³´ì•ˆì˜ ìœ„í—˜ì„±ì— ëŒ€í•´ ë¬»ëŠ”ë‹¤", next: 29 },
                    { text: "ğŸ”’ ê¸°ë°€ ë“±ê¸‰ì´ ì–´ëŠ ì •ë„ì¸ì§€ í™•ì¸í•œë‹¤", next: 30, style: "choice-conspiracy" },
                    { text: "âš ï¸ ì—°êµ¬ ì¤‘ ë¬¸ì œì ì€ ì—†ì—ˆëŠ”ì§€ ë¬»ëŠ”ë‹¤", next: 31 }
                ]
            },
            // ë” ë§ì€ ì”¬ë“¤ì„ ê³„ì† ì¶”ê°€...
            11: {
                speaker: "ë³´ì•ˆ ë‹´ë‹¹ì",
                text: "CCTVì—ëŠ” ê°•ë°•ì‚¬ í˜¼ìë§Œ ë“¤ì–´ê°€ëŠ” ëª¨ìŠµì´ ì°í˜”ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ 11ì‹œ 50ë¶„ê²½ì— ì´ìƒí•œ ê·¸ë¦¼ìê°€...",
                image: "scene_08.png",
                choices: [
                    { text: "ğŸ‘» ê·¸ë¦¼ìì˜ ì •ì²´ë¥¼ ì¶”ì í•œë‹¤", next: 32 },
                    { text: "â° ì •í™•í•œ ì‹œê°„ì„ ë‹¤ì‹œ í™•ì¸í•œë‹¤", next: 33 },
                    { text: "ğŸ“± ë‹¤ë¥¸ ê°ë„ì˜ ì¹´ë©”ë¼ë„ í™•ì¸í•œë‹¤", next: 34 }
                ]
            },
            12: {
                speaker: "ë³´ì•ˆ ë‹´ë‹¹ì",
                text: "ì¶œì… ê¸°ë¡ìƒìœ¼ë¡œëŠ” ê°•ë°•ì‚¬ë§Œ ë“¤ì–´ê°”ë‹¤ê°€ ë‚˜ì˜¤ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ...",
                image: "scene_09.png",
                choices: [
                    { text: "ğŸ” ê¸°ë¡ì˜ ë¹ˆí‹ˆì„ ì°¾ëŠ”ë‹¤", next: 35 },
                    { text: "ğŸ’» ì‹œìŠ¤í…œ í•´í‚¹ ê°€ëŠ¥ì„±ì„ í™•ì¸í•œë‹¤", next: 36, style: "choice-conspiracy" },
                    { text: "ğŸ—ï¸ ë§ˆìŠ¤í„°í‚¤ ì‚¬ìš© ê¸°ë¡ì„ ë³¸ë‹¤", next: 37 }
                ]
            },
            // íƒì • ê²½ë¡œ ê³„ì†
            14: {
                speaker: "AI ë¶„ì„",
                text: "ì„¬ìœ ì§ˆ ë¶„ì„ ê²°ê³¼: ì¼ë°˜ì ì´ì§€ ì•Šì€ ë‚˜ë…¸ ì†Œì¬ì…ë‹ˆë‹¤. êµ°ìš© ì¥ë¹„ì— ì‚¬ìš©ë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.",
                image: "detective_02.png",
                choices: [
                    { text: "ğŸ–ï¸ êµ°ìš© ì¥ë¹„ì™€ì˜ ì—°ê´€ì„±ì„ ì¶”ì í•œë‹¤", next: 38, style: "choice-conspiracy" },
                    { text: "ğŸ­ ë‚˜ë…¸ ì†Œì¬ ì œì¡°ì—…ì²´ë¥¼ ì°¾ëŠ”ë‹¤", next: 39 },
                    { text: "ğŸ”¬ ë” ì •ë°€í•œ ë¶„ì„ì„ ìš”ì²­í•œë‹¤", next: 40 }
                ]
            },
            15: {
                speaker: "AI ë¶„ì„",
                text: "ê¸ˆì† ì¡°ê° ë¶„ì„ ê²°ê³¼: ë¡œë´‡ ê´€ì ˆ ë¶€í’ˆì˜ ì¼ë¶€ë¡œ ë³´ì…ë‹ˆë‹¤. ë§¤ìš° ì •êµí•œ ê¸°ìˆ ì…ë‹ˆë‹¤.",
                image: "detective_03.png",
                choices: [
                    { text: "ğŸ¤– ë¡œë´‡ì˜ ì¢…ë¥˜ë¥¼ íŠ¹ì •í•œë‹¤", next: 41 },
                    { text: "ğŸ¢ ì œì¡°ì‚¬ë¥¼ ì¶”ì í•œë‹¤", next: 42 },
                    { text: "âš™ï¸ ì–´ë–¤ ìš©ë„ì¸ì§€ ë¶„ì„í•œë‹¤", next: 43 }
                ]
            },
            // ë“œë¼ë§ˆ ê²½ë¡œ ê³„ì†
            17: {
                speaker: "ìœ ì§€ë¯¼",
                text: "ê°•ë°•ì‚¬ë‹˜ì´ ìì‚´í•˜ì‹¤ ë¶„ì´ ì•„ë‹ˆì—ìš”... ë¬´ì–¸ê°€ ë”ì°í•œ ë¹„ë°€ì„ ì•Œê²Œ ë˜ì‹  ê²ƒ ê°™ì•˜ì–´ìš”.",
                image: "drama_02.png",
                choices: [
                    { text: "ğŸ’• ìœ ì§€ë¯¼ì˜ ê°ì •ì„ ìœ„ë¡œí•œë‹¤", next: 44, style: "choice-emotional" },
                    { text: "â“ ë”ì°í•œ ë¹„ë°€ì´ ë¬´ì—‡ì¸ì§€ ì¶”ì¸¡í•œë‹¤", next: 45 },
                    { text: "ğŸ•µï¸ ê°•ë°•ì‚¬ì˜ ê°œì¸ì  ê³ ë¯¼ì„ ì¡°ì‚¬í•œë‹¤", next: 46 }
                ]
            },
            // ìŒëª¨ ê²½ë¡œ ê³„ì†
            20: {
                speaker: "ë‚˜ë ˆì´ì…˜",
                text: "ë²½ ë’¤ì—ì„œ ìˆ¨ê²¨ì§„ í†µë¡œê°€ ë°œê²¬ë˜ì—ˆë‹¤! ë¨¼ì§€ê°€ ìŒ“ì—¬ìˆì§€ë§Œ ìµœê·¼ ì‚¬ìš©ëœ í”ì ì´ ìˆë‹¤.",
                image: "conspiracy_02.png",
                choices: [
                    { text: "ğŸšª í†µë¡œë¥¼ ë”°ë¼ ë“¤ì–´ê°„ë‹¤", next: 47, style: "choice-action" },
                    { text: "ğŸ‘£ ë°œìêµ­ì„ ìì„¸íˆ ì¡°ì‚¬í•œë‹¤", next: 48 },
                    { text: "ğŸ“¸ ì¦ê±° ì‚¬ì§„ì„ ì°ê³  ì‹ ê³ í•œë‹¤", next: 49 }
                ]
            },
            // ê³µí†µ ê²½ë¡œë¡œ ìˆ˜ë ´í•˜ëŠ” ë¶€ë¶„ë“¤
            50: {
                speaker: "ë‚˜ë ˆì´ì…˜",
                text: "ëª¨ë“  ì¦ê±°ë“¤ì´ í•˜ë‚˜ì˜ ì§„ì‹¤ì„ ê°€ë¦¬í‚¤ê³  ìˆë‹¤. ì´ì œ ê²°ì •ì ì¸ ìˆœê°„ì´ë‹¤.",
                image: "scene_24.png",
                choices: [
                    { text: "ğŸ¯ ë²”ì¸ì„ ì§€ëª©í•œë‹¤", next: 51 },
                    { text: "ğŸ“‹ ì¶”ê°€ ì¦ê±°ë¥¼ ì°¾ëŠ”ë‹¤", next: 51 },
                    { text: "ğŸ¤ ë™ë£Œë“¤ê³¼ ìƒì˜í•œë‹¤", next: 51 }
                ]
            },
            51: {
                speaker: "ë‚˜ë ˆì´ì…˜",
                text: "ì§„ì‹¤ì´ ë°í˜€ì¡Œë‹¤. ë‹¹ì‹ ì˜ ì„ íƒì´ ì´ ì‚¬ê±´ì„ ì–´ë–»ê²Œ í•´ê²°í–ˆëŠ”ì§€ í™•ì¸í•´ë³´ì.",
                image: "scene_25.png",
                choices: [
                    { text: "ğŸ”„ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ë‹¤ì‹œ í”Œë ˆì´", next: 1 },
                    { text: "ğŸ“Š ì„ íƒ ê¸°ë¡ ë³´ê¸°", next: "history" },
                    { text: "ğŸ ê²Œì„ ì¢…ë£Œ", next: "end" }
                ]
            }
        };

        // ë‚˜ë¨¸ì§€ ì”¬ë“¤ì„ ìë™ ìƒì„± (ê°„ë‹¨í•œ íŒ¨í„´ìœ¼ë¡œ)
        for (let i = 32; i <= 49; i++) {
            if (!gameScenes[i]) {
                gameScenes[i] = {
                    speaker: "íƒì •",
                    text: `ìˆ˜ì‚¬ê°€ ê³„ì†ë©ë‹ˆë‹¤. ìƒˆë¡œìš´ ë‹¨ì„œë“¤ì´ ë°œê²¬ë˜ê³  ìˆìŠµë‹ˆë‹¤. (ì¥ë©´ ${i})`,
                    image: null, // ì´ë¯¸ì§€ ì—†ìŒ - í…ìŠ¤íŠ¸ë§Œ í‘œì‹œ
                    choices: [
                        { text: "ğŸ” ë” ì¡°ì‚¬í•œë‹¤", next: Math.min(i + 1, 50) },
                        { text: "ğŸ¤” ë‹¤ë¥¸ ì ‘ê·¼ì„ ì‹œë„í•œë‹¤", next: Math.min(i + 1, 50) },
                        { text: "ğŸ“ ì§€ê¸ˆê¹Œì§€ì˜ ì •ë³´ë¥¼ ì •ë¦¬í•œë‹¤", next: Math.min(i + 1, 50) }
                    ]
                };
            }
        }

        // ì´ë¯¸ì§€ ë¡œë“œ ë° ì˜¤ë¥˜ ì²˜ë¦¬
        function loadImage(imageName) {
            if (!imageName) {
                showTextOnly();
                return;
            }

            const img = document.getElementById('vnBgImage');
            const textBg = document.getElementById('textOnlyBg');

            img.onload = function() {
                img.style.display = 'block';
                textBg.style.display = 'none';
            };

            img.onerror = function() {
                showTextOnly();
            };

            img.src = `game/images/scenes/${imageName}`;
        }

        function showTextOnly() {
            const img = document.getElementById('vnBgImage');
            const textBg = document.getElementById('textOnlyBg');
            const textContent = document.getElementById('textOnlyContent');
            const currentScene = gameScenes[gameState.currentScene];

            img.style.display = 'none';
            textBg.style.display = 'flex';
            textContent.textContent = currentScene.text;
        }

        // ì”¬ í‘œì‹œ
        function showScene(sceneId) {
            const scene = gameScenes[sceneId];
            if (!scene) {
                console.error('Scene not found:', sceneId);
                return;
            }

            // UI ì—…ë°ì´íŠ¸
            document.getElementById('vnSpeaker').textContent = scene.speaker;
            document.getElementById('vnDialogue').textContent = scene.text;
            document.getElementById('vnProgress').textContent = `ì¥ë©´ ${sceneId} / 51`;

            // ë°°ê²½ ì´ë¯¸ì§€ ë¡œë“œ
            loadImage(scene.image);

            // ì„ íƒì§€ í‘œì‹œ
            const choicesContainer = document.getElementById('vnChoices');
            choicesContainer.innerHTML = '';

            scene.choices.forEach((choice, index) => {
                const btn = document.createElement('div');
                btn.className = `vn-choice ${choice.style || ''}`;
                btn.textContent = choice.text;
                btn.onclick = () => makeChoice(index);
                choicesContainer.appendChild(btn);
            });

            // ë°©ë¬¸ ê¸°ë¡
            if (!gameState.visitedScenes.includes(sceneId)) {
                gameState.visitedScenes.push(sceneId);
            }

            saveGameState();
        }

        // ì„ íƒ ì²˜ë¦¬
        function makeChoice(choiceIndex) {
            const currentScene = gameScenes[gameState.currentScene];
            const choice = currentScene.choices[choiceIndex];

            // ì„ íƒ ê¸°ë¡
            gameState.choiceHistory.push({
                scene: gameState.currentScene,
                choice: choiceIndex,
                text: choice.text
            });

            // íŠ¹ìˆ˜ ì²˜ë¦¬
            if (choice.next === "history") {
                showChoiceHistory();
                return;
            } else if (choice.next === "end") {
                alert('ê²Œì„ì„ í”Œë ˆì´í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!');
                return;
            }

            // ë‹¤ìŒ ì”¬ìœ¼ë¡œ ì´ë™
            gameState.currentScene = choice.next;
            showScene(gameState.currentScene);
        }

        // ì„ íƒ ê¸°ë¡ ë³´ê¸°
        function showChoiceHistory() {
            let historyText = "ë‹¹ì‹ ì˜ ì„ íƒ ê¸°ë¡:\n\n";
            gameState.choiceHistory.forEach((choice, index) => {
                historyText += `${index + 1}. ì¥ë©´ ${choice.scene}: ${choice.text}\n`;
            });
            alert(historyText);
        }

        // ê²Œì„ ìƒíƒœ ê´€ë¦¬
        function saveGameState() {
            localStorage.setItem('mysteryGameState_v2', JSON.stringify(gameState));
        }

        function loadGameState() {
            const saved = localStorage.getItem('mysteryGameState_v2');
            if (saved) {
                gameState = { ...gameState, ...JSON.parse(saved) };
            }
        }

        function saveGame() {
            saveGameState();
            alert('ê²Œì„ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
            hideMenu();
        }

        function loadGame() {
            loadGameState();
            showScene(gameState.currentScene);
            alert('ê²Œì„ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤!');
            hideMenu();
        }

        function resetGame() {
            if (confirm('ì •ë§ë¡œ ì²˜ìŒë¶€í„° ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                gameState = {
                    currentScene: 1,
                    choiceHistory: [],
                    visitedScenes: [],
                    playerName: "íƒì •"
                };
                localStorage.removeItem('mysteryGameState_v2');
                showScene(1);
                hideMenu();
            }
        }

        // ë©”ë‰´ ê´€ë¦¬
        function showMenu() {
            document.getElementById('vnMenu').style.display = 'flex';
        }

        function hideMenu() {
            document.getElementById('vnMenu').style.display = 'none';
        }

        // ê²Œì„ ì´ˆê¸°í™”
        function initGame() {
            loadGameState();
            showScene(gameState.currentScene);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ê²Œì„ ì‹œì‘
        window.onload = initGame;
    </script>
</body>
</html>