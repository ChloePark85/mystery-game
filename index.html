<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#000000">
    <title>0Ïùò ÏßëÌñâ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            font-family: 'Segoe UI', 'Noto Sans CJK KR', sans-serif;
            height: 100%;
            height: calc(var(--vh, 1vh) * 100);
            overflow: hidden;
            -webkit-overflow-scrolling: touch;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        /* Î©îÏù∏ Ïª®ÌÖåÏù¥ÎÑà */
        .vn-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            height: calc(var(--vh, 1vh) * 100);
            background: #000;
            overflow: hidden;
        }

        /* ÌíÄÏä§ÌÅ¨Î¶∞ Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄ */
        .vn-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .vn-bg-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.8);
        }

        /* ÏÉÅÎã® Ìó§Îçî */
        .vn-header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            z-index: 10;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8), rgba(0,0,0,0));
            padding: 20px;
            color: white;
        }

        .vn-title {
            font-size: 1.5em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .vn-progress {
            width: 400px;
            height: 4px;
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
            margin: 10px 0 5px 0;
        }

        .vn-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4fc3f7, #29b6f6);
            border-radius: 2px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .vn-scene-info {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .vn-path-indicator {
            margin-top: 5px;
            padding: 5px 12px;
            border-radius: 15px;
            display: inline-block;
            font-size: 0.85em;
            font-weight: bold;
        }

        .path-detective {
            background: rgba(66, 165, 245, 0.8);
        }

        .path-conspiracy {
            background: rgba(255, 87, 34, 0.8);
        }

        .path-drama {
            background: rgba(156, 39, 176, 0.8);
        }

        /* ÌïòÎã® ÎåÄÌôî UI */
        .vn-dialogue-container {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 10;
            background: linear-gradient(to top, rgba(0,0,0,0.9), rgba(0,0,0,0.7));
            padding: 20px;
            min-height: 200px;
        }

        /* Ï∫êÎ¶≠ÌÑ∞ Ïù¥Î¶Ñ Î∞ïÏä§ */
        .vn-character-name {
            background: rgba(66, 165, 245, 0.9);
            color: white;
            padding: 8px 20px;
            border-radius: 20px 20px 0 0;
            font-weight: bold;
            display: inline-block;
            margin-bottom: -1px;
            font-size: 0.95em;
        }

        /* ÎåÄÌôî Î∞ïÏä§ */
        .vn-dialogue-box {
            background: rgba(255,255,255,0.95);
            color: #333;
            padding: 20px;
            border-radius: 10px;
            min-height: 100px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .vn-text {
            font-size: 1.1em;
            line-height: 1.6;
        }

        /* ÏÑ†ÌÉùÏßÄ */
        .vn-choices {
            margin-top: 15px;
        }

        .vn-choice {
            background: rgba(66, 165, 245, 0.9);
            color: white;
            padding: 15px 25px;
            margin: 10px 0;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
            font-size: 1em;
            font-weight: 500;
        }

        .vn-choice:hover {
            background: rgba(66, 165, 245, 1);
            border-color: rgba(255,255,255,0.5);
            transform: scale(1.02);
        }

        .choice-detective {
            background: rgba(33, 150, 243, 0.9);
        }

        .choice-conspiracy {
            background: rgba(255, 87, 34, 0.9);
        }

        .choice-drama {
            background: rgba(156, 39, 176, 0.9);
        }

        /* Í≥ÑÏÜçÌïòÍ∏∞ Î≤ÑÌäº */
        .vn-continue {
            position: absolute;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: rgba(66, 165, 245, 0.8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            animation: pulse 2s infinite;
        }

        .vn-continue:hover {
            background: rgba(66, 165, 245, 1);
            transform: scale(1.1);
        }

        .continue-indicator {
            color: white;
            font-size: 1.2em;
            font-weight: bold;
            margin-left: 3px;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* ÏÑ†ÌÉù ÌîºÎìúÎ∞± */
        .choice-feedback {
            background: rgba(33, 150, 243, 0.2);
            color: #2196f3;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hidden {
            display: none !important;
        }

        /* ÏóîÎî© ÌÉÄÏù¥ÌãÄ */
        .ending-title {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 15;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 30px 50px;
            border-radius: 15px;
            text-align: center;
            font-size: 2em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            animation: fadeIn 1s ease;
        }

        /* Î∞òÏùëÌòï - ÌÉúÎ∏îÎ¶ø */
        @media (max-width: 768px) {
            .vn-dialogue-container {
                padding: 15px;
            }

            .vn-header {
                padding: 15px;
            }

            .vn-progress {
                width: 80%;
                max-width: 300px;
            }

            .vn-title {
                font-size: 1.3em;
            }

            .vn-text {
                font-size: 1em;
            }

            .vn-choice {
                padding: 12px 20px;
                font-size: 0.95em;
            }
        }

        /* Î∞òÏùëÌòï - Î™®Î∞îÏùº */
        @media (max-width: 480px) {
            .vn-header {
                padding: 10px 15px;
            }

            .vn-title {
                font-size: 1.1em;
            }

            .vn-progress {
                width: 100%;
                max-width: none;
                height: 3px;
            }

            .vn-scene-info {
                font-size: 0.8em;
            }

            .vn-dialogue-container {
                padding: 10px;
                min-height: 180px;
                max-height: 50vh;
                overflow-y: auto;
            }

            .vn-character-name {
                padding: 6px 15px;
                font-size: 0.85em;
            }

            .vn-dialogue-box {
                padding: 15px;
                min-height: 80px;
            }

            .vn-text {
                font-size: 0.9em;
                line-height: 1.5;
            }

            .vn-choices {
                margin-top: 10px;
            }

            .vn-choice {
                padding: 12px 18px;
                margin: 8px 0;
                font-size: 0.9em;
                border-radius: 20px;
                /* ÌÑ∞Ïπò ÏπúÌôîÏ†Å ÌÅ¨Í∏∞ */
                min-height: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .vn-continue {
                bottom: 20px;
                right: 20px;
                width: 44px;
                height: 44px;
            }

            .continue-indicator {
                font-size: 1em;
            }

            .ending-title {
                font-size: 1.3em;
                padding: 20px 30px;
                width: 90%;
                max-width: 300px;
            }
        }

        /* Îß§Ïö∞ ÏûëÏùÄ ÌôîÎ©¥ */
        @media (max-width: 360px) {
            .vn-title {
                font-size: 1em;
            }

            .vn-dialogue-container {
                min-height: 160px;
            }

            .vn-text {
                font-size: 0.85em;
            }

            .vn-choice {
                padding: 10px 15px;
                font-size: 0.85em;
            }
        }

        /* Í∞ÄÎ°ú Î™®Îìú Î™®Î∞îÏùº */
        @media (max-height: 500px) and (orientation: landscape) {
            .vn-header {
                padding: 8px 15px;
            }

            .vn-title {
                font-size: 1em;
            }

            .vn-progress {
                margin: 5px 0 3px 0;
            }

            .vn-dialogue-container {
                min-height: 120px;
                max-height: 45vh;
            }

            .vn-dialogue-box {
                padding: 10px 15px;
                min-height: 60px;
            }

            .vn-text {
                font-size: 0.85em;
                line-height: 1.4;
            }

            .vn-choice {
                padding: 8px 15px;
                margin: 5px 0;
            }
        }

        /* ÌÑ∞Ïπò ÎîîÎ∞îÏù¥Ïä§Ïö© Ìò∏Î≤Ñ Ìö®Í≥º Ï†úÍ±∞ */
        @media (hover: none) and (pointer: coarse) {
            .vn-choice:hover {
                transform: none;
                border-color: transparent;
            }

            .vn-continue:hover {
                transform: none;
            }

            /* ÌÑ∞Ïπò ÌîºÎìúÎ∞± */
            .vn-choice:active {
                transform: scale(0.98);
                opacity: 0.9;
            }

            .vn-continue:active {
                transform: scale(0.95);
            }
        }

        /* iOS ÏÇ¨ÌååÎ¶¨ safe area ÏßÄÏõê */
        @supports (padding-bottom: env(safe-area-inset-bottom)) {
            .vn-dialogue-container {
                padding-bottom: calc(10px + env(safe-area-inset-bottom));
            }
        }
    </style>
</head>
<body>
    <div class="vn-container">
        <!-- Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄ (ÌíÄÏä§ÌÅ¨Î¶∞) -->
        <div class="vn-background">
            <img id="sceneImage" class="vn-bg-image" src="" alt="Scene Background">
        </div>

        <!-- ÏÉÅÎã® Ï†ïÎ≥¥ -->
        <div class="vn-header">
            <div class="vn-title">0Ïùò ÏßëÌñâ</div>
            <div class="vn-progress">
                <div class="vn-progress-bar" id="progressBar"></div>
            </div>
            <div class="vn-scene-info">
                <span id="phaseIndicator"></span> - <span id="sceneNumber"></span>
                <div class="vn-path-indicator" id="pathIndicator" style="display: none;"></div>
            </div>
        </div>

        <!-- ÌïòÎã® ÎåÄÌôî UI -->
        <div class="vn-dialogue-container">
            <!-- Ï∫êÎ¶≠ÌÑ∞ Ïù¥Î¶Ñ Î∞ïÏä§ -->
            <div class="vn-character-name" id="characterName">ÎÇ¥Î†àÏù¥ÏÖò</div>

            <!-- ÎåÄÌôî ÎÇ¥Ïö© Î∞ïÏä§ -->
            <div class="vn-dialogue-box">
                <div class="vn-text" id="dialogueText">
                    <!-- ÎåÄÌôî ÎÇ¥Ïö©Ïù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
                </div>
            </div>

            <!-- ÏÑ†ÌÉùÏßÄ -->
            <div class="vn-choices" id="vnChoices"></div>

            <!-- Í≥ÑÏÜçÌïòÍ∏∞ Î≤ÑÌäº -->
            <div class="vn-continue" id="vnContinue" onclick="nextDialogue()">
                <div class="continue-indicator">‚ñ∂</div>
            </div>
        </div>

        <!-- ÏóîÎî© ÌÉÄÏù¥ÌãÄ ÌëúÏãú -->
        <div id="endingTitle" class="ending-title hidden"></div>
    </div>

    <script>
        let currentDialogue = 0;
        let selectedPath = null; // detective, conspiracy, drama
        let subBranch = null; // Í∞Å Í≤ΩÎ°ú ÎÇ¥ Î∂ÑÍ∏∞

        // Î™®Îì† ÎåÄÏÇ¨ Îç∞Ïù¥ÌÑ∞ - Í∞Å Í≤ΩÎ°úÎãπ 15Í∞ú Ïû•Î©¥
        const dialogues = {
            // Í≥µÌÜµ ÎèÑÏûÖÎ∂Ä (4Í∞ú)
            common: [
                {
                    image: 'game/images/scenes/scene_01.png',
                    phase: "Phase 1: ÏÇ¨Í±¥ Î∞úÏÉù",
                    title: "Í∏¥Í∏â Ìò∏Ï∂ú",
                    speaker: "ÎÇ¥Î†àÏù¥ÏÖò",
                    content: "<strong>2024ÎÖÑ 3Ïõî 15Ïùº, Ïò§ÌõÑ 11Ïãú 30Î∂Ñ</strong><br>ÏÑúÏö∏ Í∞ïÎÇ®Íµ¨ Îç∞Ïù¥ÌÑ∞ Ìè¨Î†åÏãù ÏÇ¨Î¨¥ÏÜå"
                },
                {
                    image: 'game/images/scenes/scene_01.png',
                    phase: "Phase 1: ÏÇ¨Í±¥ Î∞úÏÉù",
                    title: "Í∏¥Í∏â Ìò∏Ï∂ú",
                    speaker: "Í≤ΩÏ∞∞ÏÑú",
                    content: "ÏßÑ ÌÉêÏ†ïÎãò, Í∏¥Í∏âÏÇ¨Í±¥ÏûÖÎãàÎã§. Í∞ïÎÇ®Íµ¨ ÏïÑÎ•¥Ïπ¥ÎîîÏïÑ Îß®ÏÖòÏóêÏÑú ÏùòÎ¨∏ÏÇ¨Í∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§."
                },
                {
                    image: 'game/images/scenes/scene_02.png',
                    phase: "Phase 1: ÏÇ¨Í±¥ Î∞úÏÉù",
                    title: "ÌòÑÏû• ÎèÑÏ∞©",
                    speaker: "ÎÇ¥Î†àÏù¥ÏÖò",
                    content: "Ï≤®Îã® Í∏∞Ïà†Î°ú Î¨¥Ïû•Ìïú Ïä§ÎßàÌä∏ Îß®ÏÖò. ÌîºÌï¥ÏûêÎäî Í∞ïÎ∞ïÏÇ¨(58ÏÑ∏), Ïª¥Ìì®ÌÑ∞ Í≥µÌïô ÍµêÏàòÏûÖÎãàÎã§."
                },
                {
                    image: 'game/images/scenes/scene_03.png',
                    phase: "Phase 1: ÏÇ¨Í±¥ Î∞úÏÉù",
                    title: "ÏÇ¨Í±¥ Î∏åÎ¶¨Ìïë",
                    speaker: "ÎÇ¥Î†àÏù¥ÏÖò",
                    content: "ÏßÄÌïò Ïó∞Íµ¨Ïã§ÏóêÏÑú Í∞ïÎ∞ïÏÇ¨Í∞Ä Î°úÎ¥á ÌåîÏóê Î™©Ïù¥ ÎàåÎ†§ ÏÇ¨Îßù. ÌòÑÏû•ÏóêÎäî Îëê Î™ÖÏùò Í¥ÄÎ†®ÏûêÍ∞Ä ÏûàÏäµÎãàÎã§."
                },
                {
                    image: 'game/images/scenes/scene_03.png',
                    phase: "Phase 1: ÏÇ¨Í±¥ Î∞úÏÉù",
                    title: "Í¥ÄÎ†®Ïûê ÏÜåÍ∞ú",
                    speaker: "Í≤ΩÏ∞∞Í¥Ä",
                    content: "Ï≤´ Î≤àÏß∏Îäî Ïú†ÏßÄÎØºÏî®(29ÏÑ∏), Í∞ïÎ∞ïÏÇ¨Ïùò Ï†úÏûêÏù¥Ïûê Ïó∞Íµ¨ÏõêÏûÖÎãàÎã§. Îëê Î≤àÏß∏Îäî ÌïúÍ∏∞ÌÉúÏî®(35ÏÑ∏), Í∞ïÎ∞ïÏÇ¨ÏôÄ Í≥µÎèôÏó∞Íµ¨Î•º ÏßÑÌñâÌï¥Ïò® ÎèôÎ£åÏûÖÎãàÎã§."
                },
                {
                    image: 'game/images/scenes/scene_04.png',
                    phase: "Phase 1: ÏÇ¨Í±¥ Î∞úÏÉù",
                    title: "Ï≤´ ÎßåÎÇ®",
                    speaker: "ÏßÑ",
                    content: "Îëê Î∂Ñ Î™®Îëê Ï∂©Í≤©ÏùÑ Î∞õÏùÄ ÏÉÅÌÉúÍµ∞Ïöî. Ïú†ÏßÄÎØºÏî®Îäî Ïö∏Í≥† ÏûàÍ≥†, ÌïúÍ∏∞ÌÉúÏî®Îäî Ïπ®Î¨µÏùÑ ÏßÄÌÇ§Í≥† ÏûàÏäµÎãàÎã§."
                },
                {
                    image: 'game/images/scenes/scene_04.png',
                    phase: "Phase 1: ÏÇ¨Í±¥ Î∞úÏÉù",
                    title: "ÏàòÏÇ¨ Î∞©Ìñ• ÏÑ†ÌÉù",
                    speaker: "ÏßÑ",
                    content: "ÏÑ∏ Í∞ÄÏßÄ Ï†ëÍ∑º Î∞©ÏãùÏù¥ ÏûàÎã§. Ïñ¥Îñ§ Î∞©Ìñ•ÏúºÎ°ú ÏàòÏÇ¨Ìï†Íπå?",
                    choices: [
                        "üî¨ Í≥ºÌïôÏ†Å Î∂ÑÏÑùÏóê ÏßëÏ§ëÌïúÎã§",
                        "üïµÔ∏è Ïà®Í≤®ÏßÑ ÏùåÎ™®Î•º Ï∂îÏ†ÅÌïúÎã§",
                        "üí≠ Ïù∏Í∞ÑÍ¥ÄÍ≥ÑÎ•º ÌååÏïÖÌïúÎã§"
                    ],
                    choice_types: ['detective', 'conspiracy', 'drama']
                }
            ],

            // üïµÔ∏è Detective Path - ÏôÑÏ†ÑÌïú 15Í∞ú Ïû•Î©¥
            detective: [
                // Phase 1: Í≥ºÌïôÏ†Å Î∂ÑÏÑù (1-5)
                {
                    image: 'game/images/scenes/detective_01.png',
                    phase: "üïµÔ∏è Detective - Phase 1: Í≥ºÌïôÏ†Å Î∂ÑÏÑù",
                    title: "ÌòÑÏû• Ï¶ùÍ±∞ ÏàòÏßë",
                    speaker: "ÏßÑ",
                    content: "Í≥ºÌïôÏ†Å Î∂ÑÏÑùÏù¥ ÎãµÏùÑ Ï§Ñ Í±∞Ïïº. Î®ºÏ†Ä ÌòÑÏû•ÏóêÏÑú Î∞úÍ≤¨Îêú Ïù¥ÏÉÅÌïú ÏÑ¨Ïú†Î•º ÌòÑÎØ∏Í≤ΩÏúºÎ°ú Î∂ÑÏÑùÌï¥Î≥¥Ïûê."
                },
                {
                    image: 'game/images/scenes/detective_02.png',
                    phase: "üïµÔ∏è Detective - Phase 1: Í≥ºÌïôÏ†Å Î∂ÑÏÑù",
                    title: "3D Íµ¨Ï°∞ Î∂ÑÏÑù",
                    speaker: "ÏßÑ",
                    content: "Î°úÎ¥á ÌåîÏùò Íµ¨Ï°∞Î•º 3DÎ°ú Î∂ÑÏÑùÌï¥Î≥¥Ïûê. Ïù¥ Í¥ÄÏ†à Î∂ÄÎ∂Ñ... Ï§ëÎ†•Ïóê ÏùòÌï¥ ÏûêÎèôÏúºÎ°ú Îã´ÌûàÎäî Íµ¨Ï°∞Î°ú ÎêòÏñ¥ ÏûàÏñ¥."
                },
                {
                    image: 'game/images/scenes/detective_03.png',
                    phase: "üïµÔ∏è Detective - Phase 1: Í≥ºÌïôÏ†Å Î∂ÑÏÑù",
                    title: "Ïã¨Î∞ïÏàò Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù",
                    speaker: "ÏßÑ",
                    content: "Ïú†ÏßÄÎØºÏùò Ïä§ÎßàÌä∏ÏõåÏπò Îç∞Ïù¥ÌÑ∞Î•º ÌÉÄÏûÑÎùºÏù∏Í≥º ÎåÄÏ°∞Ìï¥Î≥¥Ïûê. 20Ïãú 55Î∂ÑÏóê Ïã¨Î∞ïÏàòÍ∞Ä Í∏âÏÉÅÏäπÌñàÏñ¥."
                },
                {
                    image: 'game/images/scenes/detective_04.png',
                    phase: "üïµÔ∏è Detective - Phase 1: Í≥ºÌïôÏ†Å Î∂ÑÏÑù",
                    title: "ÎÖºÎ¶¨Ï†Å Ï∂îÎ°†",
                    speaker: "ÏßÑ",
                    content: "Î™®Îì† Ï¶ùÍ±∞Î•º Ïó∞Í≤∞Ìï¥Î≥¥Ïûê. Î¨ºÎ¶¨Ï†Å Ï¶ùÍ±∞, ÏãúÍ∞Ñ, Í∑∏Î¶¨Í≥† ÎèôÍ∏∞... Ìå®ÌÑ¥Ïù¥ Î≥¥Ïù¥Í∏∞ ÏãúÏûëÌï¥."
                },
                {
                    image: 'game/images/scenes/detective_05.png',
                    phase: "üïµÔ∏è Detective - Phase 1: Í≥ºÌïôÏ†Å Î∂ÑÏÑù",
                    title: "ÏàòÏÇ¨ Ï†ÑÎûµ ÏÑ†ÌÉù",
                    speaker: "ÏßÑ",
                    content: "Ïù¥Ï†ú Ïñ¥Îñ§ Î∞©Î≤ïÏúºÎ°ú ÏßÑÏã§Ïóê Ï†ëÍ∑ºÌï†Íπå?",
                    choices: [
                        "Îçî ÎßéÏùÄ Î¨ºÎ¶¨Ï†Å Ï¶ùÍ±∞Î•º ÏàòÏßëÌïúÎã§",
                        "ÎÖºÎ¶¨Ï†Å ÏïïÎ∞ïÏúºÎ°ú ÏûêÎ∞±ÏùÑ Î∞õÎäîÎã§"
                    ],
                    choice_types: ['evidence_route', 'interrogation_route']
                },

                // Phase 2-A: Ï¶ùÍ±∞ ÏàòÏßë Í≤ΩÎ°ú (6-10)
                {
                    image: 'game/images/scenes/detective_06.png',
                    phase: "üïµÔ∏è Detective - Phase 2: Ï¶ùÍ±∞ ÏàòÏßë",
                    title: "Ìè¨Î†åÏãù ÏÜåÌîÑÌä∏Ïõ®Ïñ¥ Î∂ÑÏÑù",
                    speaker: "ÏßÑ",
                    content: "Í≥†Í∏â Î∂ÑÏÑù ÏÜåÌîÑÌä∏Ïõ®Ïñ¥Î°ú 3D Ïû¨Íµ¨ÏÑ±ÏùÑ Ìï¥Î≥¥Ïûê. Ïó¨Í∏∞Ïïº! Ïù¥ ÏßÄÏ†êÏóêÏÑú ÎÑ•ÌÉÄÏù¥Í∞Ä Í±∏Î†∏Í≥†...",
                    branch: "evidence_route"
                },
                {
                    image: 'game/images/scenes/detective_07.png',
                    phase: "üïµÔ∏è Detective - Phase 2: Ï¶ùÍ±∞ ÏàòÏßë",
                    title: "UV Ï°∞ÏÇ¨",
                    speaker: "ÏßÑ",
                    content: "UV ÎùºÏù¥Ìä∏Î°ú Ïà®Í≤®ÏßÑ ÌùîÏ†ÅÏùÑ Ï∞æÏïÑÎ≥¥Ïûê. Î¥êÎùº! Ïó¨Í∏∞Ïóê ÏßÄÏõåÏßÑ ÏßÄÎ¨∏Ïù¥ ÏûàÏñ¥.",
                    branch: "evidence_route"
                },
                {
                    image: 'game/images/scenes/detective_08.png',
                    phase: "üïµÔ∏è Detective - Phase 2: Ï¶ùÍ±∞ ÏàòÏßë",
                    title: "Ï¶ùÍ±∞ Ï≤¥Í≥ÑÌôî",
                    speaker: "ÏßÑ",
                    content: "Î™®Îì† Ï¶ùÍ±∞Î•º Ï≤¥Í≥ÑÏ†ÅÏúºÎ°ú Ï†ïÎ¶¨ÌñàÏñ¥. ÏãúÍ∞ÑÏàúÏúºÎ°ú Î∞∞Ïó¥ÌïòÎ©¥... Ìå®ÌÑ¥Ïù¥ Î≥¥Ïù¥Í∏∞ ÏãúÏûëÌï¥.",
                    branch: "evidence_route"
                },
                {
                    image: 'game/images/scenes/detective_09.png',
                    phase: "üïµÔ∏è Detective - Phase 2: Ï¶ùÍ±∞ ÏàòÏßë",
                    title: "Ïã§Ìóò Ïû¨ÌòÑ",
                    speaker: "ÏßÑ",
                    content: "Ïã§Ï†úÎ°ú Í∞ôÏùÄ Ï°∞Í±¥ÏóêÏÑú Ïã§ÌóòÌï¥Î≥¥Ïûê. Í≥ºÌïôÏ†Å Í≤ÄÏ¶ùÏù¥ ÌïÑÏöîÌï¥. Í≤∞Í≥ºÎäî...",
                    branch: "evidence_route"
                },
                {
                    image: 'game/images/scenes/detective_10.png',
                    phase: "üïµÔ∏è Detective - Phase 2: Ï¶ùÍ±∞ ÏàòÏßë",
                    title: "Îç∞Ïù¥ÌÑ∞ Ï¢ÖÌï©",
                    speaker: "ÏßÑ",
                    content: "Î™®Îì† Îç∞Ïù¥ÌÑ∞Î•º Ï¢ÖÌï©Ìïú Í≤∞Í≥º... Î≤îÏù∏ÏùÄ Î™ÖÌôïÌï¥. Í≥ºÌïôÏùÄ ÏßÑÏã§ÏùÑ ÎßêÌïòÍ≥† ÏûàÏñ¥.",
                    branch: "evidence_route"
                },

                // Phase 2-B: Ïã¨Î¨∏ Í≤ΩÎ°ú (6-10)
                {
                    image: 'game/images/scenes/detective_11.png',
                    phase: "üïµÔ∏è Detective - Phase 2: Ïã¨Î¨∏",
                    title: "ÎÖºÎ¶¨Ï†Å ÏïïÎ∞ï",
                    speaker: "ÏßÑ",
                    content: "Ï¶ùÍ±∞Îäî Î™ÖÌôïÌï¥Ïöî, Ïú†ÏßÄÎØºÏî®. Í≥ºÌïôÏ†Å Î∂ÑÏÑù Í≤∞Í≥ºÎ•º Î∂ÄÏ†ïÌï† Ïàò ÏûàÎÇòÏöî?",
                    branch: "interrogation_route"
                },
                {
                    image: 'game/images/scenes/detective_12.png',
                    phase: "üïµÔ∏è Detective - Phase 2: Ïã¨Î¨∏",
                    title: "Î©îÏª§ÎãàÏ¶ò ÏÑ§Î™Ö",
                    speaker: "ÏßÑ",
                    content: "Ïù¥ Î°úÎ¥á ÌåîÏùÄ Ï†ÑÏõêÏù¥ Ï∞®Îã®ÎêòÎ©¥ Ï§ëÎ†•Ïóê ÏùòÌï¥ ÏûêÎèôÏúºÎ°ú Îã´ÌòÄÏöî. ÎãπÏã†ÏùÄ Ïù¥Î•º ÏïåÍ≥† ÏûàÏóàÏñ¥Ïöî.",
                    branch: "interrogation_route"
                },
                {
                    image: 'game/images/scenes/detective_13.png',
                    phase: "üïµÔ∏è Detective - Phase 2: Ïã¨Î¨∏",
                    title: "Î≥¥Ïïà ÏòÅÏÉÅ Î∂ÑÏÑù",
                    speaker: "ÏßÑ",
                    content: "Î≥¥Ïïà Ïπ¥Î©îÎùº ÏòÅÏÉÅÏùÑ ÌîÑÎ†àÏûÑ Îã®ÏúÑÎ°ú Î∂ÑÏÑùÌñàÏñ¥Ïöî. 20Ïãú 54Î∂ÑÏùò ÎãπÏã† Î™®ÏäµÏù¥ Î≥¥Ïó¨Ïöî.",
                    branch: "interrogation_route"
                },
                {
                    image: 'game/images/scenes/detective_14.png',
                    phase: "üïµÔ∏è Detective - Phase 2: Ïã¨Î¨∏",
                    title: "ÏµúÏ¢Ö Ï¶ùÍ±∞ Ï†úÏãú",
                    speaker: "ÏßÑ",
                    content: "Î™®Îì† Ï¶ùÍ±∞Í∞Ä ÎãπÏã†ÏùÑ Í∞ÄÎ¶¨ÌÇ§Í≥† ÏûàÏñ¥Ïöî. Í≥ºÌïôÏ†Å Î∂ÑÏÑù, ÌÉÄÏûÑÎùºÏù∏, ÎèôÍ∏∞ÍπåÏßÄ.",
                    branch: "interrogation_route"
                },
                {
                    image: 'game/images/scenes/detective_10.png',
                    phase: "üïµÔ∏è Detective - Phase 2: Ïã¨Î¨∏",
                    title: "ÏûêÎ∞± Ïú†ÎèÑ",
                    speaker: "Ïú†ÏßÄÎØº",
                    content: "Îçî Ïù¥ÏÉÅ... Ïà®Í∏∏ Ïàò ÏóÜÍ≤†ÎÑ§Ïöî. ÎãπÏã† ÎßêÏù¥ ÎßûÏïÑÏöî.",
                    branch: "interrogation_route"
                },

                // Phase 3: Î≤ïÏ†ï ÏäπÎ¶¨ (11-15)
                {
                    image: 'game/images/scenes/detective_05.png',
                    phase: "üïµÔ∏è Detective - Phase 3: Î≤ïÏ†ï ÏäπÎ¶¨",
                    title: "Î≤ïÏ†ï Ï§ÄÎπÑ",
                    speaker: "ÏßÑ",
                    content: "Î≤ïÏ†ïÏóêÏÑú Ï†úÏãúÌï† Î™®Îì† Ï¶ùÍ±∞Í∞Ä Ï§ÄÎπÑÎêòÏóàÎã§. Í≥ºÌïôÏ†Å ÏÇ¨Ïã§ÏùÄ Î∂ÄÏ†ïÌï† Ïàò ÏóÜÏñ¥."
                },
                {
                    image: 'game/images/scenes/detective_05.png',
                    phase: "üïµÔ∏è Detective - Phase 3: Î≤ïÏ†ï ÏäπÎ¶¨",
                    title: "Ï¶ùÍ±∞ Ï†úÏãú",
                    speaker: "ÏßÑ",
                    content: "Ï°¥Í≤ΩÌïòÎäî Ïû¨ÌåêÏû•Îãò, Í≥ºÌïôÏ†Å Ï¶ùÍ±∞Îäî Î™ÖÌôïÌï©ÎãàÎã§. Î¨ºÎ¶¨ÌïôÏùÄ Í±∞ÏßìÎßêÏùÑ ÌïòÏßÄ ÏïäÏäµÎãàÎã§."
                },
                {
                    image: 'game/images/scenes/detective_05.png',
                    phase: "üïµÔ∏è Detective - Phase 3: Î≤ïÏ†ï ÏäπÎ¶¨",
                    title: "Í≤ÄÏ∞∞ Î∞òÎ∞ï",
                    speaker: "Í≤ÄÏÇ¨",
                    content: "ÌîºÍ≥†Ïù∏Ïùò Î≥ÄÌò∏ÏÇ¨Îäî Ïù¥Î•º Ïñ¥ÎñªÍ≤å ÏÑ§Î™ÖÌïòÏãúÍ≤†ÏäµÎãàÍπå?"
                },
                {
                    image: 'game/images/scenes/detective_15.png',
                    phase: "üïµÔ∏è Detective - Phase 3: Î≤ïÏ†ï ÏäπÎ¶¨",
                    title: "ÏäπÎ¶¨ ÌôïÏ†ï",
                    speaker: "ÌåêÏÇ¨",
                    content: "Í≥ºÌïôÏ†Å Ï¶ùÍ±∞Ïóê Í∏∞Î∞òÌïòÏó¨ ÌîºÍ≥†Ïù∏ÏùÑ Ïú†Ï£ÑÎ°ú ÌåêÍ≤∞Ìï©ÎãàÎã§."
                },
                {
                    image: 'game/images/scenes/detective_15.png',
                    phase: "üïµÔ∏è Detective - Ending",
                    title: "ÎÖºÎ¶¨Ïùò ÏäπÎ¶¨",
                    speaker: "ÏßÑ",
                    content: "ÏßÑÏã§ÏùÄ Ïñ∏Ï†úÎÇò Í≥ºÌïôÏ†Å Î∞©Î≤ïÏúºÎ°ú Î∞ùÌòÄÏßÑÎã§. Îòê ÌïòÎÇòÏùò ÏÇ¨Í±¥Ïù¥ ÎÖºÎ¶¨ÏôÄ Ï¶ùÍ±∞Î°ú Ìï¥Í≤∞ÎêòÏóàÎã§.",
                    ending: "ÎÖºÎ¶¨Ïùò ÏäπÎ¶¨"
                }
            ],

            // üé≠ Conspiracy Path - ÏôÑÏ†ÑÌïú 15Í∞ú Ïû•Î©¥
            conspiracy: [
                // Phase 1: Ïà®Í≤®ÏßÑ ÏßÑÏã§ (1-5)
                {
                    image: 'game/images/scenes/conspiracy_01.png',
                    phase: "üé≠ Conspiracy - Phase 1: Ïà®Í≤®ÏßÑ ÏßÑÏã§",
                    title: "Íµ∞ÏÇ¨ Í∏∞Î∞Ä Î∞úÍ≤¨",
                    speaker: "ÏßÑ",
                    content: "Ïû†Íπê, Ïù¥ Ïó∞Íµ¨ Îç∞Ïù¥ÌÑ∞... Ïù¥Í±¥ Îã®ÏàúÌïú ÏÇ∞ÏóÖÏö© Î°úÎ¥áÏù¥ ÏïÑÎãàÏïº. Íµ∞ÏÇ¨Ïö© ÏûêÏú® Î¨¥Í∏∞ ÏãúÏä§ÌÖú..."
                },
                {
                    image: 'game/images/scenes/conspiracy_03.png',
                    phase: "üé≠ Conspiracy - Phase 1: Ïà®Í≤®ÏßÑ ÏßÑÏã§",
                    title: "ÏùòÏã¨Ïä§Îü¨Ïö¥ Í¥ÄÏ∞∞Ïûê",
                    speaker: "ÏßÑ",
                    content: "ÌïúÍ∏∞ÌÉúÏî®Í∞Ä Í≥ÑÏÜç ÎÇòÎ•º ÏßÄÏºúÎ≥¥Í≥† ÏûàÎã§. Ïôú Í∑∏Î†áÍ≤å Î∂àÏïàÌï¥ÌïòÏßÄ? Î≠îÍ∞Ä Ïà®Í∏∞Í≥† ÏûàÎäî Í≤å Î∂ÑÎ™ÖÌï¥."
                },
                {
                    image: 'game/images/scenes/conspiracy_04.png',
                    phase: "üé≠ Conspiracy - Phase 1: Ïà®Í≤®ÏßÑ ÏßÑÏã§",
                    title: "Îã®ÏÑúÎì§Ïùò Ïó∞Í≤∞",
                    speaker: "ÏßÑ",
                    content: "Ïù¥ÏÉÅÌï¥... ÌïúÍ∏∞ÌÉúÏî®Í∞Ä Î≥º ÎïåÎßàÎã§ Í∏âÌûà Ï†ÑÌôîÎ•º ÎÅäÍ±∞ÎÇò ÏÑúÎ•òÎ•º Í∞ÄÎ¶∞Îã§. Í∑∏Î¶¨Í≥† Ïó∞Íµ¨Ïã§ Ï∂úÏûÖ Í∏∞Î°ùÎèÑ ÏùòÏã¨Ïä§Îü¨Ïõå."
                },
                {
                    image: 'game/images/scenes/conspiracy_05.png',
                    phase: "üé≠ Conspiracy - Phase 1: Ïà®Í≤®ÏßÑ ÏßÑÏã§",
                    title: "ÏùÄÎ∞ÄÌïú ÎåÄÌôî Î™©Í≤©",
                    speaker: "ÏßÑ",
                    content: "Î∞©Í∏à ÌïúÍ∏∞ÌÉúÏî®Í∞Ä ÎàÑÍµ∞Í∞ÄÏôÄ 'ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÎÖ∏Ï∂úÎêòÎ©¥ Ïïà ÎêúÎã§'Í≥† ÎßêÌïòÎäî Í±∏ Îì§ÏóàÎã§. Î≠îÍ∞Ä ÌÅ∞ ÏùºÏù¥ Î≤åÏñ¥ÏßÄÍ≥† ÏûàÏñ¥."
                },
                {
                    image: 'game/images/scenes/conspiracy_05.png',
                    phase: "üé≠ Conspiracy - Phase 1: Ïà®Í≤®ÏßÑ ÏßÑÏã§",
                    title: "ÌïúÍ∏∞ÌÉúÎ•º Ï∂îÍ∂ÅÌïòÎã§",
                    speaker: "ÏßÑ",
                    content: "ÌïúÍ∏∞ÌÉúÏî®... Îçî Ïù¥ÏÉÅ ÏÜçÏùº Ïàò ÏóÜÏñ¥Ïöî. Íµ∞ÏÇ¨ Î¨¥Í∏∞ Ïó∞Íµ¨, ÏùÄÎ∞ÄÌïú Ï†ÑÌôî, Í∑∏Î¶¨Í≥† ÎãπÏã†Ïùò ÏàòÏÉÅÌïú ÌñâÎèôÎì§. ÏßÑÏã§ÏùÑ ÎßêÌï¥Ï£ºÏÑ∏Ïöî."
                },
                {
                    image: 'game/images/scenes/conspiracy_02.png',
                    phase: "üé≠ Conspiracy - Phase 1: Ïà®Í≤®ÏßÑ ÏßÑÏã§",
                    title: "ÌïúÍ∏∞ÌÉúÏùò Í≥†Î∞±",
                    speaker: "ÌïúÍ∏∞ÌÉú",
                    content: "...Îçî Ïù¥ÏÉÅ Ïà®Í∏∏ Ïàò ÏóÜÍ≤†Íµ∞. ÎßûÏäµÎãàÎã§, ÎÇòÎäî Íµ≠Í∞ÄÏ†ïÎ≥¥Ïõê ÏÜåÏÜçÏûÖÎãàÎã§. Ïù¥ ÌîÑÎ°úÏ†ùÌä∏Îäî Í∑πÎπÑ Íµ≠Í∞ÄÍ∏∞Î∞ÄÏÇ¨ÏóÖÏù¥ÏóàÏñ¥Ïöî."
                },
                {
                    image: 'game/images/scenes/conspiracy_05.png',
                    phase: "üé≠ Conspiracy - Phase 1: Ïà®Í≤®ÏßÑ ÏßÑÏã§",
                    title: "Ï∂îÏ†Å Î∞©Ìñ• ÏÑ†ÌÉù",
                    speaker: "ÏßÑ",
                    content: "Í±∞ÎåÄÌïú ÏùåÎ™®Ïùò Ïã§Ï≤¥Í∞Ä ÎìúÎü¨ÎÇòÍ≥† ÏûàÎã§. Ïñ¥Îäê Ï™ΩÏùÑ Î®ºÏ†Ä ÌååÌó§Ïπ†Íπå?",
                    choices: [
                        "Ï†ïÎ∂Ä Ïó∞Í≤∞Í≥†Î¶¨Î•º Ï∂îÏ†ÅÌïúÎã§",
                        "Í∏∞ÏóÖ ÎÑ§Ìä∏ÏõåÌÅ¨Î•º Ï°∞ÏÇ¨ÌïúÎã§"
                    ],
                    choice_types: ['government_route', 'corporate_route']
                },

                // Phase 2-A: Ï†ïÎ∂Ä Ï∂îÏ†Å (6-10)
                {
                    image: 'game/images/scenes/conspiracy_06.png',
                    phase: "üé≠ Conspiracy - Phase 2: Ï†ïÎ∂Ä Ï∂îÏ†Å",
                    title: "ÏßÄÌïò ÌöåÏùò",
                    speaker: "Ï†ïÎ∂Ä Í¥ÄÍ≥ÑÏûê",
                    content: "ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÎÖ∏Ï∂úÎêòÎ©¥ Ïïà ÎêúÎã§. Î™®Îì† Ï¶ùÍ±∞Î•º Ï†úÍ±∞ÌïòÎùº.",
                    branch: "government_route"
                },
                {
                    image: 'game/images/scenes/conspiracy_07.png',
                    phase: "üé≠ Conspiracy - Phase 2: Ï†ïÎ∂Ä Ï∂îÏ†Å",
                    title: "ÏÑúÎ≤ÑÏã§ Ïπ®ÏûÖ",
                    speaker: "ÏßÑ",
                    content: "Ïó¨Í∏∞Í∞Ä Î™®Îì† Îç∞Ïù¥ÌÑ∞Í∞Ä Ï†ÄÏû•Îêú Í≥≥Ïù¥Íµ∞. Ï†ïÎ∂ÄÏôÄ Í∏∞ÏóÖÏù¥ ÏñºÎßàÎÇò ÍπäÏù¥ Ïó∞Î£®ÎêòÏñ¥ ÏûàÎäîÏßÄ...",
                    branch: "government_route"
                },
                {
                    image: 'game/images/scenes/conspiracy_08.png',
                    phase: "üé≠ Conspiracy - Phase 2: Ï†ïÎ∂Ä Ï∂îÏ†Å",
                    title: "Ï†úÎ≥¥ÏûêÏôÄÏùò ÎßåÎÇ®",
                    speaker: "Ï†úÎ≥¥Ïûê",
                    content: "Ï°∞Ïã¨Ìï¥Ïöî, ÌÉêÏ†ïÎãò. ÎãπÏã†Ïù¥ ÌååÍ≥† ÏûàÎäî Í±¥ ÏÉùÍ∞ÅÎ≥¥Îã§ Ìõ®Ïî¨ ÏúÑÌóòÌï¥Ïöî.",
                    branch: "government_route"
                },
                {
                    image: 'game/images/scenes/conspiracy_10.png',
                    phase: "üé≠ Conspiracy - Phase 2: Ï†ïÎ∂Ä Ï∂îÏ†Å",
                    title: "Ï∂îÍ≤©Ï†Ñ",
                    speaker: "ÏßÑ",
                    content: "Ï††Ïû•, Îí§Îî∞ÎùºÏò§Í≥† ÏûàÏñ¥. Ïù¥ Ï†ïÎ≥¥Í∞Ä Í∑∏Î†áÍ≤å Ï§ëÏöîÌïú Í±∞Ïïº?",
                    branch: "government_route"
                },
                {
                    image: 'game/images/scenes/conspiracy_11.png',
                    phase: "üé≠ Conspiracy - Phase 2: Ï†ïÎ∂Ä Ï∂îÏ†Å",
                    title: "Î¨¥Í∏∞ ÏãúÏÑ§ Î∞úÍ≤¨",
                    speaker: "ÏßÑ",
                    content: "Ïù¥Îü∞... Ïù¥Í±¥ Ïó∞Íµ¨ ÏãúÏÑ§Ïù¥ ÏïÑÎãàÎùº Î¨¥Í∏∞ Ï†úÏ°∞ Í≥µÏû•Ïù¥Ïïº. ÏàòÎ∞± ÎåÄÏùò ÏÇ¥ÏÉÅÏö© Î°úÎ¥áÎì§...",
                    branch: "government_route"
                },

                // Phase 2-B: Í∏∞ÏóÖ Ï∂îÏ†Å (6-10)
                {
                    image: 'game/images/scenes/conspiracy_09.png',
                    phase: "üé≠ Conspiracy - Phase 2: Í∏∞ÏóÖ Ï∂îÏ†Å",
                    title: "Ï¶ùÍ±∞ Ïù∏Î©∏",
                    speaker: "Í∏∞ÏóÖ ÏûÑÏõê",
                    content: "Î™®Îì† ÌïòÎìú ÎìúÎùºÏù¥Î∏åÎ•º ÌååÍ∏∞Ìï¥! ÏÑúÎ•òÎäî Îã§ ÏÜåÍ∞ÅÌïòÍ≥†!",
                    branch: "corporate_route"
                },
                {
                    image: 'game/images/scenes/conspiracy_06.png',
                    phase: "üé≠ Conspiracy - Phase 2: Í∏∞ÏóÖ Ï∂îÏ†Å",
                    title: "Í∏∞ÏóÖ ÌöåÏùò ÎèÑÏ≤≠",
                    speaker: "Í∏∞ÏóÖ CEO",
                    content: "Ï†ïÎ∂Ä Í≥ÑÏïΩ ÎçïÎ∂ÑÏóê ÏàòÏ°∞ÏõêÏùò Ïù¥ÏùµÏù¥ Î≥¥Ïû•ÎêòÏñ¥ ÏûàÏäµÎãàÎã§.",
                    branch: "corporate_route"
                },
                {
                    image: 'game/images/scenes/conspiracy_07.png',
                    phase: "üé≠ Conspiracy - Phase 2: Í∏∞ÏóÖ Ï∂îÏ†Å",
                    title: "Ïû¨Ï†ï Ï∂îÏ†Å",
                    speaker: "ÏßÑ",
                    content: "ÏûêÍ∏àÏùò ÌùêÎ¶ÑÏùÑ Ï∂îÏ†ÅÌï¥Î≥¥Îãà... Ï†ïÎ∂Ä Í∏∞Î∞Ä ÏòàÏÇ∞Ïù¥ Ïù¥ ÌöåÏÇ¨Î°ú ÌùòÎü¨Îì§Ïñ¥Í∞ÄÍ≥† ÏûàÏñ¥.",
                    branch: "corporate_route"
                },
                {
                    image: 'game/images/scenes/conspiracy_08.png',
                    phase: "üé≠ Conspiracy - Phase 2: Í∏∞ÏóÖ Ï∂îÏ†Å",
                    title: "ÎÇ¥Î∂Ä Í≥†Î∞úÏûê",
                    speaker: "ÎÇ¥Î∂Ä Í≥†Î∞úÏûê",
                    content: "Ïù¥ ÌöåÏÇ¨Îäî Íµ∞Ïö© Î°úÎ¥áÏùÑ ÎØºÍ∞ÑÏö©ÏúºÎ°ú ÏÜçÏó¨ÏÑú Í∞úÎ∞úÌïòÍ≥† ÏûàÏñ¥Ïöî.",
                    branch: "corporate_route"
                },
                {
                    image: 'game/images/scenes/conspiracy_11.png',
                    phase: "üé≠ Conspiracy - Phase 2: Í∏∞ÏóÖ Ï∂îÏ†Å",
                    title: "ÏÉùÏÇ∞ ÎùºÏù∏ Î∞úÍ≤¨",
                    speaker: "ÏßÑ",
                    content: "Ïó¨Í∏∞Í∞Ä Ïã§Ï†ú ÏÉùÏÇ∞ ÎùºÏù∏Ïù¥Íµ∞. ÎØºÍ∞ÑÏö©Ïù¥ÎùºÎçò Î°úÎ¥áÎì§Ïù¥ Î¨¥Í∏∞Î°ú Í∞úÏ°∞ÎêòÍ≥† ÏûàÏñ¥.",
                    branch: "corporate_route"
                },

                // Phase 3: Í±∞ÎåÄÌïú Ìè≠Î°ú (11-15)
                {
                    image: 'game/images/scenes/conspiracy_12.png',
                    phase: "üé≠ Conspiracy - Phase 3: Í±∞ÎåÄÌïú Ìè≠Î°ú",
                    title: "Ïñ∏Î°†Í≥ºÏùò ÌòëÎ†•",
                    speaker: "Í∏∞Ïûê",
                    content: "Ïù¥ ÏûêÎ£åÍ∞Ä ÏßÑÏßúÎùºÎ©¥... Ï†ïÎ∂ÄÍ∞Ä Îí§ÏßëÏñ¥Ïßà Í±∞ÏòàÏöî."
                },
                {
                    image: 'game/images/scenes/conspiracy_13.png',
                    phase: "üé≠ Conspiracy - Phase 3: Í±∞ÎåÄÌïú Ìè≠Î°ú",
                    title: "ÏÉùÎ∞©ÏÜ° Ìè≠Î°ú",
                    speaker: "ÏïµÏª§",
                    content: "Ï∂©Í≤©Ï†ÅÏù∏ ÏÇ¨Ïã§Ïù¥ Î∞ùÌòÄÏ°åÏäµÎãàÎã§. Ï†ïÎ∂ÄÏôÄ ÎåÄÍ∏∞ÏóÖÏùò Î∂àÎ≤ï AI Î¨¥Í∏∞ Í∞úÎ∞ú..."
                },
                {
                    image: 'game/images/scenes/conspiracy_14.png',
                    phase: "üé≠ Conspiracy - Phase 3: Í±∞ÎåÄÌïú Ìè≠Î°ú",
                    title: "ÏùÄÏã†Ï≤òÏóêÏÑú",
                    speaker: "ÏßÑ",
                    content: "Îâ¥Ïä§Î•º Î≥¥Îãà Ï†ÑÍµ≠Ïù¥ Îì§ÎÅìÍ≥† ÏûàÏñ¥. ÌïòÏßÄÎßå ÏïÑÏßÅ ÏïàÏ†ÑÌïòÏßÄ ÏïäÏïÑ."
                },
                {
                    image: 'game/images/scenes/conspiracy_05.png',
                    phase: "üé≠ Conspiracy - Phase 3: Í±∞ÎåÄÌïú Ìè≠Î°ú",
                    title: "Í≥µÍ∞ú Ï¶ùÏñ∏",
                    speaker: "ÏßÑ",
                    content: "Íµ≠Ï†ïÍ∞êÏÇ¨ÏóêÏÑú Î™®Îì† ÏßÑÏã§ÏùÑ Í≥µÍ∞úÌïòÍ≤†ÏäµÎãàÎã§. Íµ≠ÎØºÏù¥ Ïïå Í∂åÎ¶¨Í∞Ä ÏûàÏäµÎãàÎã§."
                },
                {
                    image: 'game/images/scenes/conspiracy_15.png',
                    phase: "üé≠ Conspiracy - Ending",
                    title: "Í±∞ÎåÄÌïú Í∑∏Î¶ºÏûê",
                    speaker: "ÏßÑ",
                    content: "ÏßÑÏã§ÏùÑ Î∞ùÌòîÏßÄÎßå... Í∑∏Î¶ºÏûê ÏÑ∏Î†•ÏùÄ Ïó¨Ï†ÑÌûà Ï°¥Ïû¨ÌïúÎã§. Ïù¥Î≤àÏóî ÎÑ§Í∞Ä Ïù¥Í≤ºÏßÄÎßå, Ïö∞Î¶¨Îäî Ìï≠ÏÉÅ ÏßÄÏºúÎ≥¥Í≥† ÏûàÎã§.",
                    ending: "Í±∞ÎåÄÌïú Í∑∏Î¶ºÏûê"
                }
            ],

            // üíî Drama Path - ÏôÑÏ†ÑÌïú 15Í∞ú Ïû•Î©¥
            drama: [
                // Phase 1: Í∞êÏ†ïÏùò Î∞úÍ≤¨ (1-5)
                {
                    image: 'game/images/scenes/drama_01.png',
                    phase: "üíî Drama - Phase 1: Í∞êÏ†ïÏùò Î∞úÍ≤¨",
                    title: "Í∞êÏ†ïÏ†Å Ï†ëÍ∑º",
                    speaker: "ÏßÑ",
                    content: "Ïù¥Î≤à ÏÇ¨Í±¥ÏùÑ Ìï¥Í≤∞ÌïòÎ†§Î©¥ Ïù∏Í∞ÑÍ¥ÄÍ≥ÑÎ•º Ïù¥Ìï¥Ìï¥Ïïº Ìï† Í≤É Í∞ôÏäµÎãàÎã§. Ïú†ÏßÄÎØºÏî®, Î®ºÏ†Ä Í∞ïÎ∞ïÏÇ¨ÎãòÍ≥ºÏùò Í¥ÄÍ≥ÑÏóê ÎåÄÌï¥ ÎßêÏîÄÌï¥Ï£ºÏÑ∏Ïöî."
                },
                {
                    image: 'game/images/scenes/drama_02.png',
                    phase: "üíî Drama - Phase 1: Í∞êÏ†ïÏùò Î∞úÍ≤¨",
                    title: "Ïú†ÏßÄÎØºÏùò ÌöåÏÉÅ",
                    speaker: "Ïú†ÏßÄÎØº",
                    content: "Í∞ïÎ∞ïÏÇ¨ÎãòÍ≥º Ìï®Íªò Ïó∞Íµ¨ÌïòÎçò ÏãúÏ†àÏù¥ Í∑∏Î¶¨ÏõåÏöî... Í∑∏ÎïåÎäî Ï†ïÎßê ÌñâÎ≥µÌñàÏñ¥Ïöî. ÌïòÏßÄÎßå..."
                },
                {
                    image: 'game/images/scenes/drama_03.png',
                    phase: "üíî Drama - Phase 1: Í∞êÏ†ïÏùò Î∞úÍ≤¨",
                    title: "Í≥ºÍ±∞ Í¥ÄÍ≥Ñ Î∞úÍ≤¨",
                    speaker: "ÏßÑ",
                    content: "Ïû†Íπê, Ïù¥ ÏÇ¨ÏßÑ... Ïú†ÏßÄÎØºÏî®ÏôÄ ÌïúÍ∏∞ÌÉúÏî®Í∞Ä Ìï®Íªò ÏûàÎäî Î™®ÏäµÏù¥ÎÑ§Ïöî. Îëê Î∂ÑÏù¥ Í≥ºÍ±∞Ïóê ÌäπÎ≥ÑÌïú Í¥ÄÍ≥ÑÏòÄÎÇòÏöî?"
                },
                {
                    image: 'game/images/scenes/drama_04.png',
                    phase: "üíî Drama - Phase 1: Í∞êÏ†ïÏùò Î∞úÍ≤¨",
                    title: "Î≥µÏû°Ìïú Í¥ÄÍ≥Ñ",
                    speaker: "Ïú†ÏßÄÎØº",
                    content: "ÌïúÍ∏∞ÌÉú Ïò§Îπ†ÏôÄ Ìó§Ïñ¥ÏßÑ ÌõÑ... Í∞ïÎ∞ïÏÇ¨ÎãòÏù¥ Ï†ÄÎ•º ÎßéÏù¥ Ï±ôÍ≤®Ï£ºÏÖ®Ïñ¥Ïöî. ÌïòÏßÄÎßå Í∑∏ ÎßàÏùåÏù¥ Î∂ÄÎã¥Ïä§Îü¨Ïõ†Ïñ¥Ïöî..."
                },
                {
                    image: 'game/images/scenes/drama_05.png',
                    phase: "üíî Drama - Phase 1: Í∞êÏ†ïÏùò Î∞úÍ≤¨",
                    title: "ÏÇ¨Í±¥Ïùò ÌïµÏã¨",
                    speaker: "ÏßÑ",
                    content: "Í∑∏ÎÇ† Î∞§ Í∞ïÎ∞ïÏÇ¨ÎãòÍ≥º Î¨¥Ïä® ÏùºÏù¥ ÏûàÏóàÎÇòÏöî? Ïú†ÏßÄÎØºÏî®Í∞Ä ÎßàÏßÄÎßâÏúºÎ°ú ÎßåÎÇú ÏÇ¨ÎûåÏù¥ÎãàÍπåÏöî. Î≥µÏû°Ìïú Ïù∏Í∞ÑÍ¥ÄÍ≥ÑÍ∞Ä ÏñΩÌòÄÏûàÍµ∞Ïöî.",
                    choices: [
                        "Ïú†ÏßÄÎØºÏùò Í∞êÏ†ïÏùÑ ÍπäÏù¥ ÌååÎ≥∏Îã§",
                        "ÌïúÍ∏∞ÌÉúÏôÄÏùò Í¥ÄÍ≥ÑÎ•º Ï§ëÏû¨ÌïúÎã§"
                    ],
                    choice_types: ['emotional_route', 'relationship_route']
                },

                // Phase 2-A: Í∞êÏ†ï ÌÉêÍµ¨ (6-10)
                {
                    image: 'game/images/scenes/drama_06.png',
                    phase: "üíî Drama - Phase 2: Í∞êÏ†ï ÌÉêÍµ¨",
                    title: "ÌïúÍ∏∞ÌÉúÏùò ÌõÑÌöå",
                    speaker: "ÌïúÍ∏∞ÌÉú",
                    content: "ÎÇ¥Í∞Ä Í∑∏Îïå Ïú†ÏßÄÎØºÏùÑ Îñ†ÎÇòÏßÄ ÏïäÏïòÎã§Î©¥... ÏßÄÍ∏à Ïù¥Îü∞ ÏùºÏù¥ ÏùºÏñ¥ÎÇòÏßÄ ÏïäÏïòÏùÑ ÌÖêÎç∞...",
                    branch: "emotional_route"
                },
                {
                    image: 'game/images/scenes/drama_07.png',
                    phase: "üíî Drama - Phase 2: Í∞êÏ†ï ÌÉêÍµ¨",
                    title: "Í∞ïÎ∞ïÏÇ¨Ïùò ÏùºÍ∏∞",
                    speaker: "ÏßÑ",
                    content: "Í∞ïÎ∞ïÏÇ¨Ïùò ÏùºÍ∏∞... 'Ïú†ÏßÄÎØºÏóê ÎåÄÌïú ÎßàÏùåÏùÑ Í≥†Î∞±Ìï† Ïàò ÏóÜÏñ¥ÏÑú...' ÏùºÎ∞©Ï†ÅÏù∏ ÏÇ¨ÎûëÏù¥ÏóàÍµ∞Ïöî.",
                    branch: "emotional_route"
                },
                {
                    image: 'game/images/scenes/drama_01.png',
                    phase: "üíî Drama - Phase 2: Í∞êÏ†ï ÌÉêÍµ¨",
                    title: "Ïú†ÏßÄÎØºÏùò ÌöåÏÉÅ",
                    speaker: "Ïú†ÏßÄÎØº",
                    content: "Î∞ïÏÇ¨ÎãòÏùÄ Ìï≠ÏÉÅ Ï†ÄÎ•º... Í∑∏Îü∞ ÎààÏúºÎ°ú Î≥¥ÏÖ®Ïñ¥Ïöî. Î∂ÄÎã¥Ïä§Îü¨Ïõ†ÏßÄÎßå Í±∞Ï†àÌï† Ïàò ÏóÜÏóàÏñ¥Ïöî.",
                    branch: "emotional_route"
                },
                {
                    image: 'game/images/scenes/drama_03.png',
                    phase: "üíî Drama - Phase 2: Í∞êÏ†ï ÌÉêÍµ¨",
                    title: "Í∑∏ÎÇ† Î∞§Ïùò ÏßÑÏã§",
                    speaker: "Ïú†ÏßÄÎØº",
                    content: "Í∑∏ÎÇ† Î∞§, Î∞ïÏÇ¨ÎãòÏù¥ Îòê Í≥†Î∞±ÌïòÏãúÎ†§ Ìï† Îïå... Ï†Ñ Ï†ïÎßê ÌôîÍ∞Ä ÎÇ¨Ïñ¥Ïöî. ÏàúÍ∞ÑÏ†ÅÏúºÎ°ú Ïù¥ÏÑ±ÏùÑ ÏûÉÍ≥† Î°úÎ¥á ÌåîÏùò Ï†ÑÏõêÏùÑ ÎÅäÏñ¥Î≤ÑÎ†∏Ïñ¥Ïöî...",
                    branch: "emotional_route"
                },
                {
                    image: 'game/images/scenes/drama_05.png',
                    phase: "üíî Drama - Phase 2: Í∞êÏ†ï ÌÉêÍµ¨",
                    title: "ÏπòÎ£åÏùò ÏãúÏûë",
                    speaker: "ÏÉÅÎã¥ÏÇ¨",
                    content: "Ïú†ÏßÄÎØºÏî®, Ïù¥Ï†ú ÏÉàÎ°úÏö¥ ÏãúÏûëÏù¥ÏóêÏöî. Í≥ºÍ±∞Ïóê Î¨∂Ïó¨ ÏûàÏßÄ ÎßàÏÑ∏Ïöî.",
                    branch: "emotional_route"
                },

                // Phase 2-B: Í¥ÄÍ≥Ñ ÌöåÎ≥µ (6-10)
                {
                    image: 'game/images/scenes/drama_08.png',
                    phase: "üíî Drama - Phase 2: Í¥ÄÍ≥Ñ ÌöåÎ≥µ",
                    title: "Í≥ºÍ±∞ÏôÄÏùò ÎåÄÎ©¥",
                    speaker: "Ïú†ÏßÄÎØº",
                    content: "Í∏∞ÌÉúÏò§Îπ†... Ïôú Í∑∏Îïå ÏïÑÎ¨¥ Îßê ÏóÜÏù¥ Îñ†ÎÇ¨Ïñ¥Ïöî?",
                    branch: "relationship_route"
                },
                {
                    image: 'game/images/scenes/drama_06.png',
                    phase: "üíî Drama - Phase 2: Í¥ÄÍ≥Ñ ÌöåÎ≥µ",
                    title: "ÌïúÍ∏∞ÌÉúÏùò Í≥†Î∞±",
                    speaker: "ÌïúÍ∏∞ÌÉú",
                    content: "ÎØ∏ÏïàÌï¥, Ïú†ÏßÄÎØºÏïÑ. ÎÇ¥Í∞Ä Í≤ÅÏù¥ ÎÇ¨Ïñ¥... ÎÑàÎ•º Ï±ÖÏûÑÏßà ÏûêÏã†Ïù¥ ÏóÜÏóàÏñ¥.",
                    branch: "relationship_route"
                },
                {
                    image: 'game/images/scenes/drama_09.png',
                    phase: "üíî Drama - Phase 2: Í¥ÄÍ≥Ñ ÌöåÎ≥µ",
                    title: "Ï§ëÏû¨Ïùò ÏàúÍ∞Ñ",
                    speaker: "ÏßÑ",
                    content: "ÏÑúÎ°úÎ•º ÌÉìÌïòÎäî Í≤ÉÎ≥¥Îã§ Ïù¥Ìï¥ÌïòÎ†§Í≥† ÎÖ∏Î†•Ìï¥Î≥¥ÏÑ∏Ïöî. Í≥ºÍ±∞Îäî Î∞îÍøÄ Ïàò ÏóÜÏßÄÎßå, ÎØ∏ÎûòÎäî Îã¨ÎùºÏßà Ïàò ÏûàÏñ¥Ïöî.",
                    branch: "relationship_route"
                },
                {
                    image: 'game/images/scenes/drama_10.png',
                    phase: "üíî Drama - Phase 2: Í¥ÄÍ≥Ñ ÌöåÎ≥µ",
                    title: "Í∑∏Î£π ÏπòÎ£å",
                    speaker: "Îã§Î•∏ Ï∞∏Í∞ÄÏûê",
                    content: "ÏûêÏ±ÖÌïòÏßÄ ÎßàÏÑ∏Ïöî. Î™®Îì† Í≤å ÎãπÏã† ÏûòÎ™ªÏùÄ ÏïÑÎãàÏóêÏöî. Ïö∞Î¶¨ Î™®Îëê Ïã§ÏàòÎ•º Ìï¥Ïöî.",
                    branch: "relationship_route"
                },
                {
                    image: 'game/images/scenes/drama_12.png',
                    phase: "üíî Drama - Phase 2: Í¥ÄÍ≥Ñ ÌöåÎ≥µ",
                    title: "ÌïúÍ∏∞ÌÉúÏùò ÏßÄÏõê",
                    speaker: "ÌïúÍ∏∞ÌÉú",
                    content: "Ïú†ÏßÄÎØºÏïÑ, ÏπòÎ£åÎπÑÎäî ÎÇ¥Í∞Ä Îã§ Î∂ÄÎã¥Ìï†Í≤å. Í∑∏Î¶¨Í≥†... Îã§Ïãú ÏãúÏûëÌï† Ïàò ÏûàÍ≤å ÎèÑÏôÄÏ§ÑÍ≤å.",
                    branch: "relationship_route"
                },

                // Phase 3: Ïö©ÏÑúÏôÄ Íµ¨Ïõê (11-15)
                {
                    image: 'game/images/scenes/drama_11.png',
                    phase: "üíî Drama - Phase 3: Ïö©ÏÑúÏôÄ Íµ¨Ïõê",
                    title: "Î¨¥Îç§ ÏïûÏóêÏÑú",
                    speaker: "Ïú†ÏßÄÎØº",
                    content: "Î∞ïÏÇ¨Îãò... Ï†ïÎßê Ï£ÑÏÜ°Ìï¥Ïöî. Ï†úÍ∞Ä ÏàúÍ∞ÑÏ†ÅÏúºÎ°ú Í∞êÏ†ïÏùÑ Ï°∞Ï†àÌïòÏßÄ Î™ªÌï¥ÏÑú..."
                },
                {
                    image: 'game/images/scenes/drama_13.png',
                    phase: "üíî Drama - Phase 3: Ïö©ÏÑúÏôÄ Íµ¨Ïõê",
                    title: "Ïù∏Í∞ÑÏ†Å ÌåêÎã®",
                    speaker: "ÏßÑ",
                    content: "Î≤ïÏ†ÅÏúºÎ°úÎäî Ïú†Ï£ÑÏßÄÎßå... Ïù¥ ÏÇ¨Í±¥Ïùò Î≥∏ÏßàÏùÄ Îã§Î•¥Íµ∞Ïöî. ÏπòÎ£åÍ∞Ä Ïö∞ÏÑ†Ïù¥ÏóêÏöî."
                },
                {
                    image: 'game/images/scenes/drama_14.png',
                    phase: "üíî Drama - Phase 3: Ïö©ÏÑúÏôÄ Íµ¨Ïõê",
                    title: "ÏÉàÎ°úÏö¥ Ï∂úÎ∞ú",
                    speaker: "Ïú†ÏßÄÎØº",
                    content: "ÏÉà ÏßÅÏû•ÏóêÏÑú ÏïÑÏù¥Îì§ÏùÑ Í∞ÄÎ•¥ÏπòÍ≤å ÎêêÏñ¥Ïöî. Í≥ºÌïôÏùò ÏïÑÎ¶ÑÎã§ÏõÄÏùÑ Ï†ÑÌïòÍ≥† Ïã∂Ïñ¥Ïöî."
                },
                {
                    image: 'game/images/scenes/drama_12.png',
                    phase: "üíî Drama - Phase 3: Ïö©ÏÑúÏôÄ Íµ¨Ïõê",
                    title: "ÌôîÌï¥",
                    speaker: "ÌïúÍ∏∞ÌÉú",
                    content: "Ïù¥Ï†ú Ïö∞Î¶¨Îäî ÏÑúÎ°úÎ•º Ïù¥Ìï¥ÌïòÍ≤å ÎêêÏñ¥. Í≥ºÍ±∞Ïùò ÏÉÅÏ≤òÎèÑ ÏπòÏú†ÎêòÍ≥† ÏûàÍ≥†."
                },
                {
                    image: 'game/images/scenes/drama_15.png',
                    phase: "üíî Drama - Ending",
                    title: "ÎßàÏùåÏùò ÏßÑÏã§",
                    speaker: "ÏßÑ",
                    content: "ÏÑ∏ ÏÇ¨Îûå Î™®Îëê ÏûêÏã†ÎßåÏùò ÌèâÌôîÎ•º Ï∞æÏïòÍµ∞Ïöî. ÎïåÎ°úÎäî Î≤ïÎ≥¥Îã§ Ïù∏Í∞ÑÏùò ÎßàÏùåÏù¥ Îçî Ï§ëÏöîÌïú Î≤ïÏù¥Ï£†.",
                    ending: "ÎßàÏùåÏùò ÏßÑÏã§"
                }
            ]
        };

        function showDialogue() {
            let currentData;

            if (selectedPath === null) {
                // Í≥µÌÜµ ÎèÑÏûÖÎ∂Ä
                if (currentDialogue >= dialogues.common.length) {
                    // Í≤ΩÎ°ú ÏÑ†ÌÉùÏù¥ Ïïà Îêú ÏÉÅÌÉúÎ°ú Í≥µÌÜµ Î∂ÄÎ∂ÑÏùÑ ÎÑòÏñ¥ÏÑ∞Îã§Î©¥ ÏóêÎü¨
                    console.error('Path not selected after common scenes');
                    return;
                }
                currentData = dialogues.common[currentDialogue];
            } else {
                // ÏÑ†ÌÉùÎêú Í≤ΩÎ°úÏùò ÎåÄÏÇ¨
                const pathDialogues = dialogues[selectedPath];
                const adjustedIndex = currentDialogue - dialogues.common.length;

                if (adjustedIndex >= pathDialogues.length) {
                    showGameComplete();
                    return;
                }

                currentData = pathDialogues[adjustedIndex];

                // Î∂ÑÍ∏∞ ÌïÑÌÑ∞ÎßÅ
                if (currentData.branch && subBranch !== currentData.branch) {
                    nextDialogue();
                    return;
                }
            }

            // Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄ ÌëúÏãú
            showDialogueImage(currentData.image);

            // UI ÏóÖÎç∞Ïù¥Ìä∏
            document.getElementById('phaseIndicator').textContent = currentData.phase;
            document.getElementById('sceneNumber').textContent = currentData.title;
            document.getElementById('characterName').textContent = currentData.speaker || "ÎÇ¥Î†àÏù¥ÏÖò";
            document.getElementById('dialogueText').innerHTML = currentData.content;

            // Í≤ΩÎ°ú ÌëúÏãúÍ∏∞ ÏóÖÎç∞Ïù¥Ìä∏
            updatePathIndicator();

            // ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
            updateProgress();

            // ÏóîÎî© ÌëúÏãú
            if (currentData.ending) {
                showEnding(currentData.ending);
            }

            // ÏÑ†ÌÉùÏßÄ Ï≤òÎ¶¨
            if (currentData.choices) {
                showChoices(currentData.choices, currentData.choice_types);
                document.getElementById('vnContinue').style.display = 'none';
            } else {
                hideChoices();
                document.getElementById('vnContinue').style.display = 'flex';
            }
        }

        function showDialogueImage(imagePath) {
            const imageElement = document.getElementById('sceneImage');
            if (imagePath) {
                imageElement.style.display = 'block';
                imageElement.src = imagePath;
                imageElement.onload = () => console.log(`‚úÖ Image loaded: ${imagePath}`);
                imageElement.onerror = () => {
                    console.log(`‚ö†Ô∏è Image not found: ${imagePath}, using fallback`);
                    imageElement.src = 'game/images/scenes/scene_01.png';
                };
            }
        }

        function showChoices(choices, choiceTypes) {
            const choicesDiv = document.getElementById('vnChoices');
            choicesDiv.innerHTML = '';
            choicesDiv.style.display = 'block';

            choices.forEach((choice, index) => {
                const choiceDiv = document.createElement('div');
                choiceDiv.className = 'vn-choice';

                if (choiceTypes) {
                    const choiceType = choiceTypes[index];
                    if (['detective', 'evidence_route', 'interrogation_route'].includes(choiceType)) {
                        choiceDiv.classList.add('choice-detective');
                    } else if (['conspiracy', 'government_route', 'corporate_route'].includes(choiceType)) {
                        choiceDiv.classList.add('choice-conspiracy');
                    } else if (['drama', 'emotional_route', 'relationship_route'].includes(choiceType)) {
                        choiceDiv.classList.add('choice-drama');
                    }
                }

                choiceDiv.textContent = choice;
                choiceDiv.onclick = () => handleChoice(index, choiceTypes);
                choicesDiv.appendChild(choiceDiv);
            });
        }

        function hideChoices() {
            document.getElementById('vnChoices').style.display = 'none';
        }

        function handleChoice(choiceIndex, choiceTypes) {
            if (choiceTypes) {
                const choiceType = choiceTypes[choiceIndex];

                // Î©îÏù∏ Í≤ΩÎ°ú ÏÑ†ÌÉù
                if (['detective', 'conspiracy', 'drama'].includes(choiceType)) {
                    selectedPath = choiceType;
                    currentDialogue = dialogues.common.length;
                } else {
                    // ÏÑúÎ∏å Î∂ÑÍ∏∞ ÏÑ§Ï†ï
                    subBranch = choiceType;
                }

                // ÏÑ†ÌÉù ÌîºÎìúÎ∞± ÌëúÏãú
                showChoiceFeedback(choiceType);
            }

            setTimeout(() => {
                nextDialogue();
            }, 1500);
        }

        function showChoiceFeedback(choiceType) {
            // Í≤ΩÎ°ú ÌëúÏãú Í∏∞Îä• Ï†úÍ±∞ - ÏÑ†ÌÉù ÌîºÎìúÎ∞± ÏóÜÏùå
            return;
        }

        function updatePathIndicator() {
            // Í≤ΩÎ°ú ÌëúÏãú Í∏∞Îä• Ï†úÍ±∞
            const pathIndicator = document.getElementById('pathIndicator');
            if (pathIndicator) {
                pathIndicator.style.display = 'none';
            }
            return;
        }

        function updateProgress() {
            let totalScenes;
            let currentProgress;

            if (selectedPath === null) {
                totalScenes = dialogues.common.length;
                currentProgress = currentDialogue + 1;
            } else {
                totalScenes = dialogues.common.length + dialogues[selectedPath].length;
                currentProgress = dialogues.common.length + (currentDialogue - dialogues.common.length) + 1;
            }

            const progress = (currentProgress / totalScenes) * 100;
            document.getElementById('progressBar').style.width = Math.min(progress, 100) + '%';
        }

        function showEnding(endingTitle) {
            const endingDiv = document.getElementById('endingTitle');
            endingDiv.textContent = endingTitle;
            endingDiv.classList.remove('hidden');

            setTimeout(() => {
                endingDiv.classList.add('hidden');
            }, 3000);
        }

        function showGameComplete() {
            document.getElementById('vnContinue').innerHTML = '<div class="continue-indicator">üîÑ</div>';
            document.getElementById('vnContinue').onclick = () => restartGame();

            const dialogueBox = document.querySelector('.vn-dialogue-box .vn-text');
            dialogueBox.innerHTML = `
                <strong>Í≤åÏûÑ ÏôÑÎ£å!</strong><br>
                Îã§Î•∏ Í≤ΩÎ°úÎ•º ÏÑ†ÌÉùÌï¥ÏÑú Îã§Î•∏ ÏóîÎî©ÏùÑ Í≤ΩÌóòÌï¥Î≥¥ÏÑ∏Ïöî.<br>
                üîÑ Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÎ©¥ Ï≤òÏùåÎ∂ÄÌÑ∞ Îã§Ïãú ÏãúÏûëÌï©ÎãàÎã§.
            `;
        }

        function nextDialogue() {
            currentDialogue++;
            showDialogue();
        }

        function restartGame() {
            currentDialogue = 0;
            selectedPath = null;
            subBranch = null;

            // UI Ï¥àÍ∏∞Ìôî
            document.getElementById('pathIndicator').style.display = 'none';
            document.getElementById('endingTitle').classList.add('hidden');

            // Í≥ÑÏÜçÌïòÍ∏∞ Î≤ÑÌäº Î≥µÏõê
            document.getElementById('vnContinue').innerHTML = '<div class="continue-indicator">‚ñ∂</div>';
            document.getElementById('vnContinue').onclick = () => nextDialogue();

            showDialogue();
        }

        // ÌÑ∞Ïπò/ÌÅ¥Î¶≠ÏúºÎ°ú Îã§Ïùå ÎåÄÌôî ÏßÑÌñâ (ÎåÄÌôî Î∞ïÏä§ ÏòÅÏó≠)
        document.querySelector('.vn-dialogue-box').addEventListener('click', function(e) {
            // ÏÑ†ÌÉùÏßÄÍ∞Ä ÌëúÏãúÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ÏóêÎßå Îã§ÏùåÏúºÎ°ú
            if (document.getElementById('vnChoices').style.display === 'none' ||
                document.getElementById('vnChoices').innerHTML === '') {
                nextDialogue();
            }
        });

        // ÌÑ∞Ïπò Ïù¥Î≤§Ìä∏ ÏßÄÏõê (ÎçîÎ∏î ÌÉ≠ Î∞©ÏßÄ)
        let lastTap = 0;
        document.querySelector('.vn-dialogue-box').addEventListener('touchend', function(e) {
            const currentTime = new Date().getTime();
            const tapLength = currentTime - lastTap;
            if (tapLength < 300 && tapLength > 0) {
                e.preventDefault();
                return;
            }
            lastTap = currentTime;
        });

        // ÌÇ§Î≥¥Îìú ÏßÄÏõê (Ïä§ÌéòÏù¥Ïä§Î∞î, ÏóîÌÑ∞Î°ú ÏßÑÌñâ)
        document.addEventListener('keydown', function(e) {
            if (e.code === 'Space' || e.code === 'Enter') {
                // ÏÑ†ÌÉùÏßÄÍ∞Ä ÌëúÏãúÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ÏóêÎßå
                if (document.getElementById('vnChoices').style.display === 'none' ||
                    document.getElementById('vnChoices').innerHTML === '') {
                    e.preventDefault();
                    nextDialogue();
                }
            }
        });

        // Î™®Î∞îÏùº Ï£ºÏÜåÏ∞Ω ÎÜíÏù¥ Î¨∏Ï†ú Ìï¥Í≤∞
        function setMobileHeight() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }
        setMobileHeight();
        window.addEventListener('resize', setMobileHeight);
        window.addEventListener('orientationchange', function() {
            setTimeout(setMobileHeight, 100);
        });

        // Í≤åÏûÑ ÏãúÏûë
        showDialogue();
    </script>
</body>
</html>