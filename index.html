<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>0ì˜ ì§‘í–‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            font-family: 'Segoe UI', 'Noto Sans CJK KR', sans-serif;
            height: 100%;
            overflow: hidden;
        }

        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        .vn-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: #000;
        }

        /* í’€ìŠ¤í¬ë¦° ë°°ê²½ ì´ë¯¸ì§€ */
        .vn-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .vn-bg-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.8);
        }

        /* ìƒë‹¨ í—¤ë” */
        .vn-header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            z-index: 10;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8), rgba(0,0,0,0));
            padding: 20px;
            color: white;
        }

        .vn-title {
            font-size: 1.5em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .vn-progress {
            width: 400px;
            height: 4px;
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
            margin: 10px 0 5px 0;
        }

        .vn-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4fc3f7, #29b6f6);
            border-radius: 2px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .vn-scene-info {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .vn-path-indicator {
            margin-top: 5px;
            padding: 5px 12px;
            border-radius: 15px;
            display: inline-block;
            font-size: 0.85em;
            font-weight: bold;
        }

        .path-detective {
            background: rgba(66, 165, 245, 0.8);
        }

        .path-conspiracy {
            background: rgba(255, 87, 34, 0.8);
        }

        .path-drama {
            background: rgba(156, 39, 176, 0.8);
        }

        /* í•˜ë‹¨ ëŒ€í™” UI */
        .vn-dialogue-container {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 10;
            background: linear-gradient(to top, rgba(0,0,0,0.9), rgba(0,0,0,0.7));
            padding: 20px;
            min-height: 200px;
        }

        /* ìºë¦­í„° ì´ë¦„ ë°•ìŠ¤ */
        .vn-character-name {
            background: rgba(66, 165, 245, 0.9);
            color: white;
            padding: 8px 20px;
            border-radius: 20px 20px 0 0;
            font-weight: bold;
            display: inline-block;
            margin-bottom: -1px;
            font-size: 0.95em;
        }

        /* ëŒ€í™” ë°•ìŠ¤ */
        .vn-dialogue-box {
            background: rgba(255,255,255,0.95);
            color: #333;
            padding: 20px;
            border-radius: 10px;
            min-height: 100px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .vn-text {
            font-size: 1.1em;
            line-height: 1.6;
        }

        /* ì„ íƒì§€ */
        .vn-choices {
            margin-top: 15px;
        }

        .vn-choice {
            background: rgba(66, 165, 245, 0.9);
            color: white;
            padding: 15px 25px;
            margin: 10px 0;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
            font-size: 1em;
            font-weight: 500;
        }

        .vn-choice:hover {
            background: rgba(66, 165, 245, 1);
            border-color: rgba(255,255,255,0.5);
            transform: scale(1.02);
        }

        .choice-detective {
            background: rgba(33, 150, 243, 0.9);
        }

        .choice-conspiracy {
            background: rgba(255, 87, 34, 0.9);
        }

        .choice-drama {
            background: rgba(156, 39, 176, 0.9);
        }

        /* ê³„ì†í•˜ê¸° ë²„íŠ¼ */
        .vn-continue {
            position: absolute;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: rgba(66, 165, 245, 0.8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            animation: pulse 2s infinite;
        }

        .vn-continue:hover {
            background: rgba(66, 165, 245, 1);
            transform: scale(1.1);
        }

        .continue-indicator {
            color: white;
            font-size: 1.2em;
            font-weight: bold;
            margin-left: 3px;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* ì„ íƒ í”¼ë“œë°± */
        .choice-feedback {
            background: rgba(33, 150, 243, 0.2);
            color: #2196f3;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hidden {
            display: none !important;
        }

        /* ì—”ë”© íƒ€ì´í‹€ */
        .ending-title {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 15;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 30px 50px;
            border-radius: 15px;
            text-align: center;
            font-size: 2em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            animation: fadeIn 1s ease;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .vn-dialogue-container {
                padding: 15px;
            }

            .vn-header {
                padding: 15px;
            }

            .vn-progress {
                width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="vn-container">
        <!-- ë°°ê²½ ì´ë¯¸ì§€ (í’€ìŠ¤í¬ë¦°) -->
        <div class="vn-background">
            <img id="sceneImage" class="vn-bg-image" src="" alt="Scene Background">
        </div>

        <!-- ìƒë‹¨ ì •ë³´ -->
        <div class="vn-header">
            <div class="vn-title">0ì˜ ì§‘í–‰</div>
            <div class="vn-progress">
                <div class="vn-progress-bar" id="progressBar"></div>
            </div>
            <div class="vn-scene-info">
                <span id="phaseIndicator"></span> - <span id="sceneNumber"></span>
                <div class="vn-path-indicator" id="pathIndicator" style="display: none;"></div>
            </div>
        </div>

        <!-- í•˜ë‹¨ ëŒ€í™” UI -->
        <div class="vn-dialogue-container">
            <!-- ìºë¦­í„° ì´ë¦„ ë°•ìŠ¤ -->
            <div class="vn-character-name" id="characterName">ë‚´ë ˆì´ì…˜</div>

            <!-- ëŒ€í™” ë‚´ìš© ë°•ìŠ¤ -->
            <div class="vn-dialogue-box">
                <div class="vn-text" id="dialogueText">
                    <!-- ëŒ€í™” ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>

            <!-- ì„ íƒì§€ -->
            <div class="vn-choices" id="vnChoices"></div>

            <!-- ê³„ì†í•˜ê¸° ë²„íŠ¼ -->
            <div class="vn-continue" id="vnContinue" onclick="nextDialogue()">
                <div class="continue-indicator">â–¶</div>
            </div>
        </div>

        <!-- ì—”ë”© íƒ€ì´í‹€ í‘œì‹œ -->
        <div id="endingTitle" class="ending-title hidden"></div>
    </div>

    <script>
        let currentDialogue = 0;
        let selectedPath = null; // detective, conspiracy, drama
        let subBranch = null; // ê° ê²½ë¡œ ë‚´ ë¶„ê¸°

        // ëª¨ë“  ëŒ€ì‚¬ ë°ì´í„° - ê° ê²½ë¡œë‹¹ 15ê°œ ì¥ë©´
        const dialogues = {
            // ê³µí†µ ë„ì…ë¶€ (4ê°œ)
            common: [
                {
                    image: 'game/images/scenes/scene_01.png',
                    phase: "Phase 1: ì‚¬ê±´ ë°œìƒ",
                    title: "ê¸´ê¸‰ í˜¸ì¶œ",
                    speaker: "ë‚´ë ˆì´ì…˜",
                    content: "<strong>2024ë…„ 3ì›” 15ì¼, ì˜¤í›„ 11ì‹œ 30ë¶„</strong><br>ì„œìš¸ ê°•ë‚¨êµ¬ ë°ì´í„° í¬ë Œì‹ ì‚¬ë¬´ì†Œ"
                },
                {
                    image: 'game/images/scenes/scene_01.png',
                    phase: "Phase 1: ì‚¬ê±´ ë°œìƒ",
                    title: "ê¸´ê¸‰ í˜¸ì¶œ",
                    speaker: "ê²½ì°°ì„œ",
                    content: "ì§„ íƒì •ë‹˜, ê¸´ê¸‰ì‚¬ê±´ì…ë‹ˆë‹¤. ê°•ë‚¨êµ¬ ì•„ë¥´ì¹´ë””ì•„ ë§¨ì…˜ì—ì„œ ì˜ë¬¸ì‚¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."
                },
                {
                    image: 'game/images/scenes/scene_02.png',
                    phase: "Phase 1: ì‚¬ê±´ ë°œìƒ",
                    title: "í˜„ì¥ ë„ì°©",
                    speaker: "ë‚´ë ˆì´ì…˜",
                    content: "ì²¨ë‹¨ ê¸°ìˆ ë¡œ ë¬´ì¥í•œ ìŠ¤ë§ˆíŠ¸ ë§¨ì…˜. í”¼í•´ìëŠ” ê°•ë°•ì‚¬(58ì„¸), ì»´í“¨í„° ê³µí•™ êµìˆ˜ì…ë‹ˆë‹¤."
                },
                {
                    image: 'game/images/scenes/scene_03.png',
                    phase: "Phase 1: ì‚¬ê±´ ë°œìƒ",
                    title: "ì‚¬ê±´ ë¸Œë¦¬í•‘",
                    speaker: "ë‚´ë ˆì´ì…˜",
                    content: "ì§€í•˜ ì—°êµ¬ì‹¤ì—ì„œ ê°•ë°•ì‚¬ê°€ ë¡œë´‡ íŒ”ì— ëª©ì´ ëˆŒë ¤ ì‚¬ë§. í˜„ì¥ì—ëŠ” ë‘ ëª…ì˜ ê´€ë ¨ìê°€ ìˆìŠµë‹ˆë‹¤."
                },
                {
                    image: 'game/images/scenes/scene_04.png',
                    phase: "Phase 1: ì‚¬ê±´ ë°œìƒ",
                    title: "ìˆ˜ì‚¬ ë°©í–¥ ì„ íƒ",
                    speaker: "ì§„",
                    content: "ì„¸ ê°€ì§€ ì ‘ê·¼ ë°©ì‹ì´ ìˆë‹¤. ì–´ë–¤ ë°©í–¥ìœ¼ë¡œ ìˆ˜ì‚¬í• ê¹Œ?",
                    choices: [
                        "ğŸ”¬ ê³¼í•™ì  ë¶„ì„ì— ì§‘ì¤‘í•œë‹¤",
                        "ğŸ•µï¸ ìˆ¨ê²¨ì§„ ìŒëª¨ë¥¼ ì¶”ì í•œë‹¤",
                        "ğŸ’­ ì¸ê°„ê´€ê³„ë¥¼ íŒŒì•…í•œë‹¤"
                    ],
                    choice_types: ['detective', 'conspiracy', 'drama']
                }
            ],

            // ğŸ•µï¸ Detective Path - ì™„ì „í•œ 15ê°œ ì¥ë©´
            detective: [
                // Phase 1: ê³¼í•™ì  ë¶„ì„ (1-5)
                {
                    image: 'game/images/scenes/detective_01.png',
                    phase: "ğŸ•µï¸ Detective - Phase 1: ê³¼í•™ì  ë¶„ì„",
                    title: "ì„¬ìœ  ë¶„ì„",
                    speaker: "ì§„",
                    content: "í˜„ë¯¸ê²½ìœ¼ë¡œ ë¡œë´‡ íŒ”ì—ì„œ ë°œê²¬ëœ ì„¬ìœ ë¥¼ ë¶„ì„í•´ë³´ì. ì´ ì‘ì€ ì¡°ê°ì´ ì‚¬ê±´ì˜ ì—´ì‡ ê°€ ë  ìˆ˜ ìˆì–´."
                },
                {
                    image: 'game/images/scenes/detective_02.png',
                    phase: "ğŸ•µï¸ Detective - Phase 1: ê³¼í•™ì  ë¶„ì„",
                    title: "3D êµ¬ì¡° ë¶„ì„",
                    speaker: "ì§„",
                    content: "ë¡œë´‡ íŒ”ì˜ êµ¬ì¡°ë¥¼ 3Dë¡œ ë¶„ì„í•´ë³´ì. ì´ ê´€ì ˆ ë¶€ë¶„... ì¤‘ë ¥ì— ì˜í•´ ìë™ìœ¼ë¡œ ë‹«íˆëŠ” êµ¬ì¡°ë¡œ ë˜ì–´ ìˆì–´."
                },
                {
                    image: 'game/images/scenes/detective_03.png',
                    phase: "ğŸ•µï¸ Detective - Phase 1: ê³¼í•™ì  ë¶„ì„",
                    title: "ì‹¬ë°•ìˆ˜ ë°ì´í„° ë¶„ì„",
                    speaker: "ì§„",
                    content: "ìœ ì§€ë¯¼ì˜ ìŠ¤ë§ˆíŠ¸ì›Œì¹˜ ë°ì´í„°ë¥¼ íƒ€ì„ë¼ì¸ê³¼ ëŒ€ì¡°í•´ë³´ì. 20ì‹œ 55ë¶„ì— ì‹¬ë°•ìˆ˜ê°€ ê¸‰ìƒìŠ¹í–ˆì–´."
                },
                {
                    image: 'game/images/scenes/detective_04.png',
                    phase: "ğŸ•µï¸ Detective - Phase 1: ê³¼í•™ì  ë¶„ì„",
                    title: "ë…¼ë¦¬ì  ì¶”ë¡ ",
                    speaker: "ì§„",
                    content: "ëª¨ë“  ì¦ê±°ë¥¼ ì—°ê²°í•´ë³´ì. ë¬¼ë¦¬ì  ì¦ê±°, ì‹œê°„, ê·¸ë¦¬ê³  ë™ê¸°... íŒ¨í„´ì´ ë³´ì´ê¸° ì‹œì‘í•´."
                },
                {
                    image: 'game/images/scenes/detective_05.png',
                    phase: "ğŸ•µï¸ Detective - Phase 1: ê³¼í•™ì  ë¶„ì„",
                    title: "ìˆ˜ì‚¬ ì „ëµ ì„ íƒ",
                    speaker: "ì§„",
                    content: "ì´ì œ ì–´ë–¤ ë°©ë²•ìœ¼ë¡œ ì§„ì‹¤ì— ì ‘ê·¼í• ê¹Œ?",
                    choices: [
                        "ë” ë§ì€ ë¬¼ë¦¬ì  ì¦ê±°ë¥¼ ìˆ˜ì§‘í•œë‹¤",
                        "ë…¼ë¦¬ì  ì••ë°•ìœ¼ë¡œ ìë°±ì„ ë°›ëŠ”ë‹¤"
                    ],
                    choice_types: ['evidence_route', 'interrogation_route']
                },

                // Phase 2-A: ì¦ê±° ìˆ˜ì§‘ ê²½ë¡œ (6-10)
                {
                    image: 'game/images/scenes/detective_06.png',
                    phase: "ğŸ•µï¸ Detective - Phase 2: ì¦ê±° ìˆ˜ì§‘",
                    title: "í¬ë Œì‹ ì†Œí”„íŠ¸ì›¨ì–´ ë¶„ì„",
                    speaker: "ì§„",
                    content: "ê³ ê¸‰ ë¶„ì„ ì†Œí”„íŠ¸ì›¨ì–´ë¡œ 3D ì¬êµ¬ì„±ì„ í•´ë³´ì. ì—¬ê¸°ì•¼! ì´ ì§€ì ì—ì„œ ë„¥íƒ€ì´ê°€ ê±¸ë ¸ê³ ...",
                    branch: "evidence_route"
                },
                {
                    image: 'game/images/scenes/detective_07.png',
                    phase: "ğŸ•µï¸ Detective - Phase 2: ì¦ê±° ìˆ˜ì§‘",
                    title: "UV ì¡°ì‚¬",
                    speaker: "ì§„",
                    content: "UV ë¼ì´íŠ¸ë¡œ ìˆ¨ê²¨ì§„ í”ì ì„ ì°¾ì•„ë³´ì. ë´ë¼! ì—¬ê¸°ì— ì§€ì›Œì§„ ì§€ë¬¸ì´ ìˆì–´.",
                    branch: "evidence_route"
                },
                {
                    image: 'game/images/scenes/detective_08.png',
                    phase: "ğŸ•µï¸ Detective - Phase 2: ì¦ê±° ìˆ˜ì§‘",
                    title: "ì¦ê±° ì²´ê³„í™”",
                    speaker: "ì§„",
                    content: "ëª¨ë“  ì¦ê±°ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ì •ë¦¬í–ˆì–´. ì‹œê°„ìˆœìœ¼ë¡œ ë°°ì—´í•˜ë©´... íŒ¨í„´ì´ ë³´ì´ê¸° ì‹œì‘í•´.",
                    branch: "evidence_route"
                },
                {
                    image: 'game/images/scenes/detective_09.png',
                    phase: "ğŸ•µï¸ Detective - Phase 2: ì¦ê±° ìˆ˜ì§‘",
                    title: "ì‹¤í—˜ ì¬í˜„",
                    speaker: "ì§„",
                    content: "ì‹¤ì œë¡œ ê°™ì€ ì¡°ê±´ì—ì„œ ì‹¤í—˜í•´ë³´ì. ê³¼í•™ì  ê²€ì¦ì´ í•„ìš”í•´. ê²°ê³¼ëŠ”...",
                    branch: "evidence_route"
                },
                {
                    image: 'game/images/scenes/detective_10.png',
                    phase: "ğŸ•µï¸ Detective - Phase 2: ì¦ê±° ìˆ˜ì§‘",
                    title: "ë°ì´í„° ì¢…í•©",
                    speaker: "ì§„",
                    content: "ëª¨ë“  ë°ì´í„°ë¥¼ ì¢…í•©í•œ ê²°ê³¼... ë²”ì¸ì€ ëª…í™•í•´. ê³¼í•™ì€ ì§„ì‹¤ì„ ë§í•˜ê³  ìˆì–´.",
                    branch: "evidence_route"
                },

                // Phase 2-B: ì‹¬ë¬¸ ê²½ë¡œ (6-10)
                {
                    image: 'game/images/scenes/detective_11.png',
                    phase: "ğŸ•µï¸ Detective - Phase 2: ì‹¬ë¬¸",
                    title: "ë…¼ë¦¬ì  ì••ë°•",
                    speaker: "ì§„",
                    content: "ì¦ê±°ëŠ” ëª…í™•í•´ìš”, ìœ ì§€ë¯¼ì”¨. ê³¼í•™ì  ë¶„ì„ ê²°ê³¼ë¥¼ ë¶€ì •í•  ìˆ˜ ìˆë‚˜ìš”?",
                    branch: "interrogation_route"
                },
                {
                    image: 'game/images/scenes/detective_12.png',
                    phase: "ğŸ•µï¸ Detective - Phase 2: ì‹¬ë¬¸",
                    title: "ë©”ì»¤ë‹ˆì¦˜ ì„¤ëª…",
                    speaker: "ì§„",
                    content: "ì´ ë¡œë´‡ íŒ”ì€ ì „ì›ì´ ì°¨ë‹¨ë˜ë©´ ì¤‘ë ¥ì— ì˜í•´ ìë™ìœ¼ë¡œ ë‹«í˜€ìš”. ë‹¹ì‹ ì€ ì´ë¥¼ ì•Œê³  ìˆì—ˆì–´ìš”.",
                    branch: "interrogation_route"
                },
                {
                    image: 'game/images/scenes/detective_13.png',
                    phase: "ğŸ•µï¸ Detective - Phase 2: ì‹¬ë¬¸",
                    title: "ë³´ì•ˆ ì˜ìƒ ë¶„ì„",
                    speaker: "ì§„",
                    content: "ë³´ì•ˆ ì¹´ë©”ë¼ ì˜ìƒì„ í”„ë ˆì„ ë‹¨ìœ„ë¡œ ë¶„ì„í–ˆì–´ìš”. 20ì‹œ 54ë¶„ì˜ ë‹¹ì‹  ëª¨ìŠµì´ ë³´ì—¬ìš”.",
                    branch: "interrogation_route"
                },
                {
                    image: 'game/images/scenes/detective_14.png',
                    phase: "ğŸ•µï¸ Detective - Phase 2: ì‹¬ë¬¸",
                    title: "ìµœì¢… ì¦ê±° ì œì‹œ",
                    speaker: "ì§„",
                    content: "ëª¨ë“  ì¦ê±°ê°€ ë‹¹ì‹ ì„ ê°€ë¦¬í‚¤ê³  ìˆì–´ìš”. ê³¼í•™ì  ë¶„ì„, íƒ€ì„ë¼ì¸, ë™ê¸°ê¹Œì§€.",
                    branch: "interrogation_route"
                },
                {
                    image: 'game/images/scenes/detective_10.png',
                    phase: "ğŸ•µï¸ Detective - Phase 2: ì‹¬ë¬¸",
                    title: "ìë°± ìœ ë„",
                    speaker: "ìœ ì§€ë¯¼",
                    content: "ë” ì´ìƒ... ìˆ¨ê¸¸ ìˆ˜ ì—†ê² ë„¤ìš”. ë‹¹ì‹  ë§ì´ ë§ì•„ìš”.",
                    branch: "interrogation_route"
                },

                // Phase 3: ë²•ì • ìŠ¹ë¦¬ (11-15)
                {
                    image: 'game/images/scenes/detective_05.png',
                    phase: "ğŸ•µï¸ Detective - Phase 3: ë²•ì • ìŠ¹ë¦¬",
                    title: "ë²•ì • ì¤€ë¹„",
                    speaker: "ì§„",
                    content: "ë²•ì •ì—ì„œ ì œì‹œí•  ëª¨ë“  ì¦ê±°ê°€ ì¤€ë¹„ë˜ì—ˆë‹¤. ê³¼í•™ì  ì‚¬ì‹¤ì€ ë¶€ì •í•  ìˆ˜ ì—†ì–´."
                },
                {
                    image: 'game/images/scenes/detective_05.png',
                    phase: "ğŸ•µï¸ Detective - Phase 3: ë²•ì • ìŠ¹ë¦¬",
                    title: "ì¦ê±° ì œì‹œ",
                    speaker: "ì§„",
                    content: "ì¡´ê²½í•˜ëŠ” ì¬íŒì¥ë‹˜, ê³¼í•™ì  ì¦ê±°ëŠ” ëª…í™•í•©ë‹ˆë‹¤. ë¬¼ë¦¬í•™ì€ ê±°ì§“ë§ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
                },
                {
                    image: 'game/images/scenes/detective_05.png',
                    phase: "ğŸ•µï¸ Detective - Phase 3: ë²•ì • ìŠ¹ë¦¬",
                    title: "ê²€ì°° ë°˜ë°•",
                    speaker: "ê²€ì‚¬",
                    content: "í”¼ê³ ì¸ì˜ ë³€í˜¸ì‚¬ëŠ” ì´ë¥¼ ì–´ë–»ê²Œ ì„¤ëª…í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
                },
                {
                    image: 'game/images/scenes/detective_15.png',
                    phase: "ğŸ•µï¸ Detective - Phase 3: ë²•ì • ìŠ¹ë¦¬",
                    title: "ìŠ¹ë¦¬ í™•ì •",
                    speaker: "íŒì‚¬",
                    content: "ê³¼í•™ì  ì¦ê±°ì— ê¸°ë°˜í•˜ì—¬ í”¼ê³ ì¸ì„ ìœ ì£„ë¡œ íŒê²°í•©ë‹ˆë‹¤."
                },
                {
                    image: 'game/images/scenes/detective_15.png',
                    phase: "ğŸ•µï¸ Detective - Ending",
                    title: "ë…¼ë¦¬ì˜ ìŠ¹ë¦¬",
                    speaker: "ì§„",
                    content: "ì§„ì‹¤ì€ ì–¸ì œë‚˜ ê³¼í•™ì  ë°©ë²•ìœ¼ë¡œ ë°í˜€ì§„ë‹¤. ë˜ í•˜ë‚˜ì˜ ì‚¬ê±´ì´ ë…¼ë¦¬ì™€ ì¦ê±°ë¡œ í•´ê²°ë˜ì—ˆë‹¤.",
                    ending: "ë…¼ë¦¬ì˜ ìŠ¹ë¦¬"
                }
            ],

            // ğŸ­ Conspiracy Path - ì™„ì „í•œ 15ê°œ ì¥ë©´
            conspiracy: [
                // Phase 1: ìˆ¨ê²¨ì§„ ì§„ì‹¤ (1-5)
                {
                    image: 'game/images/scenes/conspiracy_01.png',
                    phase: "ğŸ­ Conspiracy - Phase 1: ìˆ¨ê²¨ì§„ ì§„ì‹¤",
                    title: "êµ°ì‚¬ ê¸°ë°€ ë°œê²¬",
                    speaker: "ì§„",
                    content: "ì ê¹, ì´ ì—°êµ¬ ë°ì´í„°... ì´ê±´ ë‹¨ìˆœí•œ ì‚°ì—…ìš© ë¡œë´‡ì´ ì•„ë‹ˆì•¼. êµ°ì‚¬ìš© ììœ¨ ë¬´ê¸° ì‹œìŠ¤í…œ..."
                },
                {
                    image: 'game/images/scenes/conspiracy_02.png',
                    phase: "ğŸ­ Conspiracy - Phase 1: ìˆ¨ê²¨ì§„ ì§„ì‹¤",
                    title: "í•œê¸°íƒœì˜ ì •ì²´",
                    speaker: "í•œê¸°íƒœ",
                    content: "ë” ì´ìƒ ìˆ¨ê¸¸ í•„ìš”ê°€ ì—†ê² êµ°. ë‚˜ëŠ” êµ­ê°€ì •ë³´ì› ì†Œì†ì´ë‹¤. ì´ í”„ë¡œì íŠ¸ëŠ” êµ­ê°€ê¸°ë°€ì‚¬ì—…ì´ì—ˆì–´."
                },
                {
                    image: 'game/images/scenes/conspiracy_03.png',
                    phase: "ğŸ­ Conspiracy - Phase 1: ìˆ¨ê²¨ì§„ ì§„ì‹¤",
                    title: "ìœ ì§€ë¯¼ì˜ ê³ ë°±",
                    speaker: "ìœ ì§€ë¯¼",
                    content: "ì´ USBì— ëª¨ë“  ê²Œ ë‹´ê²¨ ìˆì–´ìš”. ì •ë¶€ì™€ ê¸°ì—…ì´ ì†ì¡ê³  ë¶ˆë²• ë¬´ê¸°ë¥¼ ê°œë°œí•˜ê³  ìˆì—ˆì–´ìš”."
                },
                {
                    image: 'game/images/scenes/conspiracy_04.png',
                    phase: "ğŸ­ Conspiracy - Phase 1: ìˆ¨ê²¨ì§„ ì§„ì‹¤",
                    title: "AI í•´í‚¹",
                    speaker: "ë…¸ì•„",
                    content: "ê²½ê³ : ë¹„ì¸ê°€ ì ‘ê·¼ íƒì§€. ìˆ¨ê²¨ì§„ íŒŒì¼ ë³µêµ¬ ì¤‘... ì§„ì‹¤ì´ ë“œëŸ¬ë‚˜ê³  ìˆìŠµë‹ˆë‹¤."
                },
                {
                    image: 'game/images/scenes/conspiracy_05.png',
                    phase: "ğŸ­ Conspiracy - Phase 1: ìˆ¨ê²¨ì§„ ì§„ì‹¤",
                    title: "ì¶”ì  ë°©í–¥ ì„ íƒ",
                    speaker: "ì§„",
                    content: "ê±°ëŒ€í•œ ìŒëª¨ì˜ ì‹¤ì²´ê°€ ë“œëŸ¬ë‚˜ê³  ìˆë‹¤. ì–´ëŠ ìª½ì„ ë¨¼ì € íŒŒí—¤ì¹ ê¹Œ?",
                    choices: [
                        "ì •ë¶€ ì—°ê²°ê³ ë¦¬ë¥¼ ì¶”ì í•œë‹¤",
                        "ê¸°ì—… ë„¤íŠ¸ì›Œí¬ë¥¼ ì¡°ì‚¬í•œë‹¤"
                    ],
                    choice_types: ['government_route', 'corporate_route']
                },

                // Phase 2-A: ì •ë¶€ ì¶”ì  (6-10)
                {
                    image: 'game/images/scenes/conspiracy_06.png',
                    phase: "ğŸ­ Conspiracy - Phase 2: ì •ë¶€ ì¶”ì ",
                    title: "ì§€í•˜ íšŒì˜",
                    speaker: "ì •ë¶€ ê´€ê³„ì",
                    content: "í”„ë¡œì íŠ¸ê°€ ë…¸ì¶œë˜ë©´ ì•ˆ ëœë‹¤. ëª¨ë“  ì¦ê±°ë¥¼ ì œê±°í•˜ë¼.",
                    branch: "government_route"
                },
                {
                    image: 'game/images/scenes/conspiracy_07.png',
                    phase: "ğŸ­ Conspiracy - Phase 2: ì •ë¶€ ì¶”ì ",
                    title: "ì„œë²„ì‹¤ ì¹¨ì…",
                    speaker: "ì§„",
                    content: "ì—¬ê¸°ê°€ ëª¨ë“  ë°ì´í„°ê°€ ì €ì¥ëœ ê³³ì´êµ°. ì •ë¶€ì™€ ê¸°ì—…ì´ ì–¼ë§ˆë‚˜ ê¹Šì´ ì—°ë£¨ë˜ì–´ ìˆëŠ”ì§€...",
                    branch: "government_route"
                },
                {
                    image: 'game/images/scenes/conspiracy_08.png',
                    phase: "ğŸ­ Conspiracy - Phase 2: ì •ë¶€ ì¶”ì ",
                    title: "ì œë³´ìì™€ì˜ ë§Œë‚¨",
                    speaker: "ì œë³´ì",
                    content: "ì¡°ì‹¬í•´ìš”, íƒì •ë‹˜. ë‹¹ì‹ ì´ íŒŒê³  ìˆëŠ” ê±´ ìƒê°ë³´ë‹¤ í›¨ì”¬ ìœ„í—˜í•´ìš”.",
                    branch: "government_route"
                },
                {
                    image: 'game/images/scenes/conspiracy_10.png',
                    phase: "ğŸ­ Conspiracy - Phase 2: ì •ë¶€ ì¶”ì ",
                    title: "ì¶”ê²©ì „",
                    speaker: "ì§„",
                    content: "ì  ì¥, ë’¤ë”°ë¼ì˜¤ê³  ìˆì–´. ì´ ì •ë³´ê°€ ê·¸ë ‡ê²Œ ì¤‘ìš”í•œ ê±°ì•¼?",
                    branch: "government_route"
                },
                {
                    image: 'game/images/scenes/conspiracy_11.png',
                    phase: "ğŸ­ Conspiracy - Phase 2: ì •ë¶€ ì¶”ì ",
                    title: "ë¬´ê¸° ì‹œì„¤ ë°œê²¬",
                    speaker: "ì§„",
                    content: "ì´ëŸ°... ì´ê±´ ì—°êµ¬ ì‹œì„¤ì´ ì•„ë‹ˆë¼ ë¬´ê¸° ì œì¡° ê³µì¥ì´ì•¼. ìˆ˜ë°± ëŒ€ì˜ ì‚´ìƒìš© ë¡œë´‡ë“¤...",
                    branch: "government_route"
                },

                // Phase 2-B: ê¸°ì—… ì¶”ì  (6-10)
                {
                    image: 'game/images/scenes/conspiracy_09.png',
                    phase: "ğŸ­ Conspiracy - Phase 2: ê¸°ì—… ì¶”ì ",
                    title: "ì¦ê±° ì¸ë©¸",
                    speaker: "ê¸°ì—… ì„ì›",
                    content: "ëª¨ë“  í•˜ë“œ ë“œë¼ì´ë¸Œë¥¼ íŒŒê¸°í•´! ì„œë¥˜ëŠ” ë‹¤ ì†Œê°í•˜ê³ !",
                    branch: "corporate_route"
                },
                {
                    image: 'game/images/scenes/conspiracy_06.png',
                    phase: "ğŸ­ Conspiracy - Phase 2: ê¸°ì—… ì¶”ì ",
                    title: "ê¸°ì—… íšŒì˜ ë„ì²­",
                    speaker: "ê¸°ì—… CEO",
                    content: "ì •ë¶€ ê³„ì•½ ë•ë¶„ì— ìˆ˜ì¡°ì›ì˜ ì´ìµì´ ë³´ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.",
                    branch: "corporate_route"
                },
                {
                    image: 'game/images/scenes/conspiracy_07.png',
                    phase: "ğŸ­ Conspiracy - Phase 2: ê¸°ì—… ì¶”ì ",
                    title: "ì¬ì • ì¶”ì ",
                    speaker: "ì§„",
                    content: "ìê¸ˆì˜ íë¦„ì„ ì¶”ì í•´ë³´ë‹ˆ... ì •ë¶€ ê¸°ë°€ ì˜ˆì‚°ì´ ì´ íšŒì‚¬ë¡œ í˜ëŸ¬ë“¤ì–´ê°€ê³  ìˆì–´.",
                    branch: "corporate_route"
                },
                {
                    image: 'game/images/scenes/conspiracy_08.png',
                    phase: "ğŸ­ Conspiracy - Phase 2: ê¸°ì—… ì¶”ì ",
                    title: "ë‚´ë¶€ ê³ ë°œì",
                    speaker: "ë‚´ë¶€ ê³ ë°œì",
                    content: "ì´ íšŒì‚¬ëŠ” êµ°ìš© ë¡œë´‡ì„ ë¯¼ê°„ìš©ìœ¼ë¡œ ì†ì—¬ì„œ ê°œë°œí•˜ê³  ìˆì–´ìš”.",
                    branch: "corporate_route"
                },
                {
                    image: 'game/images/scenes/conspiracy_11.png',
                    phase: "ğŸ­ Conspiracy - Phase 2: ê¸°ì—… ì¶”ì ",
                    title: "ìƒì‚° ë¼ì¸ ë°œê²¬",
                    speaker: "ì§„",
                    content: "ì—¬ê¸°ê°€ ì‹¤ì œ ìƒì‚° ë¼ì¸ì´êµ°. ë¯¼ê°„ìš©ì´ë¼ë˜ ë¡œë´‡ë“¤ì´ ë¬´ê¸°ë¡œ ê°œì¡°ë˜ê³  ìˆì–´.",
                    branch: "corporate_route"
                },

                // Phase 3: ê±°ëŒ€í•œ í­ë¡œ (11-15)
                {
                    image: 'game/images/scenes/conspiracy_12.png',
                    phase: "ğŸ­ Conspiracy - Phase 3: ê±°ëŒ€í•œ í­ë¡œ",
                    title: "ì–¸ë¡ ê³¼ì˜ í˜‘ë ¥",
                    speaker: "ê¸°ì",
                    content: "ì´ ìë£Œê°€ ì§„ì§œë¼ë©´... ì •ë¶€ê°€ ë’¤ì§‘ì–´ì§ˆ ê±°ì˜ˆìš”."
                },
                {
                    image: 'game/images/scenes/conspiracy_13.png',
                    phase: "ğŸ­ Conspiracy - Phase 3: ê±°ëŒ€í•œ í­ë¡œ",
                    title: "ìƒë°©ì†¡ í­ë¡œ",
                    speaker: "ì•µì»¤",
                    content: "ì¶©ê²©ì ì¸ ì‚¬ì‹¤ì´ ë°í˜€ì¡ŒìŠµë‹ˆë‹¤. ì •ë¶€ì™€ ëŒ€ê¸°ì—…ì˜ ë¶ˆë²• AI ë¬´ê¸° ê°œë°œ..."
                },
                {
                    image: 'game/images/scenes/conspiracy_14.png',
                    phase: "ğŸ­ Conspiracy - Phase 3: ê±°ëŒ€í•œ í­ë¡œ",
                    title: "ì€ì‹ ì²˜ì—ì„œ",
                    speaker: "ì§„",
                    content: "ë‰´ìŠ¤ë¥¼ ë³´ë‹ˆ ì „êµ­ì´ ë“¤ë“ê³  ìˆì–´. í•˜ì§€ë§Œ ì•„ì§ ì•ˆì „í•˜ì§€ ì•Šì•„."
                },
                {
                    image: 'game/images/scenes/conspiracy_05.png',
                    phase: "ğŸ­ Conspiracy - Phase 3: ê±°ëŒ€í•œ í­ë¡œ",
                    title: "ê³µê°œ ì¦ì–¸",
                    speaker: "ì§„",
                    content: "êµ­ì •ê°ì‚¬ì—ì„œ ëª¨ë“  ì§„ì‹¤ì„ ê³µê°œí•˜ê² ìŠµë‹ˆë‹¤. êµ­ë¯¼ì´ ì•Œ ê¶Œë¦¬ê°€ ìˆìŠµë‹ˆë‹¤."
                },
                {
                    image: 'game/images/scenes/conspiracy_15.png',
                    phase: "ğŸ­ Conspiracy - Ending",
                    title: "ê±°ëŒ€í•œ ê·¸ë¦¼ì",
                    speaker: "ì§„",
                    content: "ì§„ì‹¤ì„ ë°í˜”ì§€ë§Œ... ê·¸ë¦¼ì ì„¸ë ¥ì€ ì—¬ì „íˆ ì¡´ì¬í•œë‹¤. ì´ë²ˆì—” ë„¤ê°€ ì´ê²¼ì§€ë§Œ, ìš°ë¦¬ëŠ” í•­ìƒ ì§€ì¼œë³´ê³  ìˆë‹¤.",
                    ending: "ê±°ëŒ€í•œ ê·¸ë¦¼ì"
                }
            ],

            // ğŸ’” Drama Path - ì™„ì „í•œ 15ê°œ ì¥ë©´
            drama: [
                // Phase 1: ê°ì •ì˜ ë°œê²¬ (1-5)
                {
                    image: 'game/images/scenes/drama_01.png',
                    phase: "ğŸ’” Drama - Phase 1: ê°ì •ì˜ ë°œê²¬",
                    title: "ê³¼ê±°ì˜ ê¸°ì–µ",
                    speaker: "ìœ ì§€ë¯¼",
                    content: "ê°•ë°•ì‚¬ë‹˜ê³¼ í•¨ê»˜ ì—°êµ¬í•˜ë˜ ì‹œì ˆì´ ê·¸ë¦¬ì›Œìš”... ê·¸ë•ŒëŠ” ì •ë§ í–‰ë³µí–ˆì–´ìš”."
                },
                {
                    image: 'game/images/scenes/drama_02.png',
                    phase: "ğŸ’” Drama - Phase 1: ê°ì •ì˜ ë°œê²¬",
                    title: "ì˜› ì—°ì¸ì˜ ë°œê²¬",
                    speaker: "ì§„",
                    content: "ì´ ì‚¬ì§„... ìœ ì§€ë¯¼ì”¨ì™€ í•œê¸°íƒœì”¨ê°€ í•¨ê»˜ ìˆëŠ” ëª¨ìŠµì´ë„¤ìš”. ê³¼ê±°ì— íŠ¹ë³„í•œ ê´€ê³„ì˜€ë‚˜ìš”?"
                },
                {
                    image: 'game/images/scenes/drama_03.png',
                    phase: "ğŸ’” Drama - Phase 1: ê°ì •ì˜ ë°œê²¬",
                    title: "ê³ ë°±ì˜ ìˆœê°„",
                    speaker: "ìœ ì§€ë¯¼",
                    content: "ì „ ì •ë§ë¡œ... ì •ë§ë¡œ ê°•ë°•ì‚¬ë‹˜ì„ ì£½ì´ë ¤ë˜ ê²Œ ì•„ë‹ˆì—ˆì–´ìš”! ìœ¼í‘..."
                },
                {
                    image: 'game/images/scenes/drama_04.png',
                    phase: "ğŸ’” Drama - Phase 1: ê°ì •ì˜ ë°œê²¬",
                    title: "ë”°ëœ»í•œ ìœ„ë¡œ",
                    speaker: "ì§„",
                    content: "ê´œì°®ì•„ìš”. ì²œì²œíˆ ë§í•´ë³´ì„¸ìš”. ì „ ë‹¹ì‹ ì„ ì´í•´í•˜ë ¤ê³  í•´ìš”."
                },
                {
                    image: 'game/images/scenes/drama_05.png',
                    phase: "ğŸ’” Drama - Phase 1: ê°ì •ì˜ ë°œê²¬",
                    title: "ì ‘ê·¼ ë°©í–¥ ì„ íƒ",
                    speaker: "ì§„",
                    content: "ë³µì¡í•œ ì¸ê°„ê´€ê³„ê°€ ì–½í˜€ìˆë‹¤. ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼í• ê¹Œ?",
                    choices: [
                        "ìœ ì§€ë¯¼ì˜ ê³¼ê±°ë¥¼ ê¹Šì´ íŒŒë³¸ë‹¤",
                        "í•œê¸°íƒœì™€ì˜ ê´€ê³„ë¥¼ ì¤‘ì¬í•œë‹¤"
                    ],
                    choice_types: ['emotional_route', 'relationship_route']
                },

                // Phase 2-A: ê°ì • íƒêµ¬ (6-10)
                {
                    image: 'game/images/scenes/drama_06.png',
                    phase: "ğŸ’” Drama - Phase 2: ê°ì • íƒêµ¬",
                    title: "í•œê¸°íƒœì˜ í›„íšŒ",
                    speaker: "í•œê¸°íƒœ",
                    content: "ë‚´ê°€ ê·¸ë•Œ ìœ ì§€ë¯¼ì„ ë– ë‚˜ì§€ ì•Šì•˜ë‹¤ë©´... ì§€ê¸ˆ ì´ëŸ° ì¼ì´ ì¼ì–´ë‚˜ì§€ ì•Šì•˜ì„ í…ë°...",
                    branch: "emotional_route"
                },
                {
                    image: 'game/images/scenes/drama_07.png',
                    phase: "ğŸ’” Drama - Phase 2: ê°ì • íƒêµ¬",
                    title: "ê°•ë°•ì‚¬ì˜ ì¼ê¸°",
                    speaker: "ì§„",
                    content: "ê°•ë°•ì‚¬ì˜ ì¼ê¸°... 'ìœ ì§€ë¯¼ì— ëŒ€í•œ ë§ˆìŒì„ ê³ ë°±í•  ìˆ˜ ì—†ì–´ì„œ...' ì¼ë°©ì ì¸ ì‚¬ë‘ì´ì—ˆêµ°ìš”.",
                    branch: "emotional_route"
                },
                {
                    image: 'game/images/scenes/drama_01.png',
                    phase: "ğŸ’” Drama - Phase 2: ê°ì • íƒêµ¬",
                    title: "ìœ ì§€ë¯¼ì˜ íšŒìƒ",
                    speaker: "ìœ ì§€ë¯¼",
                    content: "ë°•ì‚¬ë‹˜ì€ í•­ìƒ ì €ë¥¼... ê·¸ëŸ° ëˆˆìœ¼ë¡œ ë³´ì…¨ì–´ìš”. ë¶€ë‹´ìŠ¤ëŸ¬ì› ì§€ë§Œ ê±°ì ˆí•  ìˆ˜ ì—†ì—ˆì–´ìš”.",
                    branch: "emotional_route"
                },
                {
                    image: 'game/images/scenes/drama_03.png',
                    phase: "ğŸ’” Drama - Phase 2: ê°ì • íƒêµ¬",
                    title: "ê°ì •ì˜ í­ë°œ",
                    speaker: "ìœ ì§€ë¯¼",
                    content: "ê·¸ë‚  ë°¤, ë°•ì‚¬ë‹˜ì´ ë˜ ê³ ë°±í•˜ì‹œë ¤ í•  ë•Œ... ì „ ì •ë§ í™”ê°€ ë‚¬ì–´ìš”. ê·¸ë˜ì„œ...",
                    branch: "emotional_route"
                },
                {
                    image: 'game/images/scenes/drama_05.png',
                    phase: "ğŸ’” Drama - Phase 2: ê°ì • íƒêµ¬",
                    title: "ì¹˜ë£Œì˜ ì‹œì‘",
                    speaker: "ìƒë‹´ì‚¬",
                    content: "ìœ ì§€ë¯¼ì”¨, ì´ì œ ìƒˆë¡œìš´ ì‹œì‘ì´ì—ìš”. ê³¼ê±°ì— ë¬¶ì—¬ ìˆì§€ ë§ˆì„¸ìš”.",
                    branch: "emotional_route"
                },

                // Phase 2-B: ê´€ê³„ íšŒë³µ (6-10)
                {
                    image: 'game/images/scenes/drama_08.png',
                    phase: "ğŸ’” Drama - Phase 2: ê´€ê³„ íšŒë³µ",
                    title: "ê³¼ê±°ì™€ì˜ ëŒ€ë©´",
                    speaker: "ìœ ì§€ë¯¼",
                    content: "ê¸°íƒœì˜¤ë¹ ... ì™œ ê·¸ë•Œ ì•„ë¬´ ë§ ì—†ì´ ë– ë‚¬ì–´ìš”?",
                    branch: "relationship_route"
                },
                {
                    image: 'game/images/scenes/drama_06.png',
                    phase: "ğŸ’” Drama - Phase 2: ê´€ê³„ íšŒë³µ",
                    title: "í•œê¸°íƒœì˜ ê³ ë°±",
                    speaker: "í•œê¸°íƒœ",
                    content: "ë¯¸ì•ˆí•´, ìœ ì§€ë¯¼ì•„. ë‚´ê°€ ê²ì´ ë‚¬ì–´... ë„ˆë¥¼ ì±…ì„ì§ˆ ìì‹ ì´ ì—†ì—ˆì–´.",
                    branch: "relationship_route"
                },
                {
                    image: 'game/images/scenes/drama_09.png',
                    phase: "ğŸ’” Drama - Phase 2: ê´€ê³„ íšŒë³µ",
                    title: "ì¤‘ì¬ì˜ ìˆœê°„",
                    speaker: "ì§„",
                    content: "ì„œë¡œë¥¼ íƒ“í•˜ëŠ” ê²ƒë³´ë‹¤ ì´í•´í•˜ë ¤ê³  ë…¸ë ¥í•´ë³´ì„¸ìš”. ê³¼ê±°ëŠ” ë°”ê¿€ ìˆ˜ ì—†ì§€ë§Œ, ë¯¸ë˜ëŠ” ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ìš”.",
                    branch: "relationship_route"
                },
                {
                    image: 'game/images/scenes/drama_10.png',
                    phase: "ğŸ’” Drama - Phase 2: ê´€ê³„ íšŒë³µ",
                    title: "ê·¸ë£¹ ì¹˜ë£Œ",
                    speaker: "ë‹¤ë¥¸ ì°¸ê°€ì",
                    content: "ìì±…í•˜ì§€ ë§ˆì„¸ìš”. ëª¨ë“  ê²Œ ë‹¹ì‹  ì˜ëª»ì€ ì•„ë‹ˆì—ìš”. ìš°ë¦¬ ëª¨ë‘ ì‹¤ìˆ˜ë¥¼ í•´ìš”.",
                    branch: "relationship_route"
                },
                {
                    image: 'game/images/scenes/drama_12.png',
                    phase: "ğŸ’” Drama - Phase 2: ê´€ê³„ íšŒë³µ",
                    title: "í•œê¸°íƒœì˜ ì§€ì›",
                    speaker: "í•œê¸°íƒœ",
                    content: "ìœ ì§€ë¯¼ì•„, ì¹˜ë£Œë¹„ëŠ” ë‚´ê°€ ë‹¤ ë¶€ë‹´í• ê²Œ. ê·¸ë¦¬ê³ ... ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤„ê²Œ.",
                    branch: "relationship_route"
                },

                // Phase 3: ìš©ì„œì™€ êµ¬ì› (11-15)
                {
                    image: 'game/images/scenes/drama_11.png',
                    phase: "ğŸ’” Drama - Phase 3: ìš©ì„œì™€ êµ¬ì›",
                    title: "ë¬´ë¤ ì•ì—ì„œ",
                    speaker: "ìœ ì§€ë¯¼",
                    content: "ë°•ì‚¬ë‹˜... ì •ë§ ì£„ì†¡í•´ìš”. ì œê°€ ìˆœê°„ì ìœ¼ë¡œ ê°ì •ì„ ì¡°ì ˆí•˜ì§€ ëª»í•´ì„œ..."
                },
                {
                    image: 'game/images/scenes/drama_13.png',
                    phase: "ğŸ’” Drama - Phase 3: ìš©ì„œì™€ êµ¬ì›",
                    title: "ì¸ê°„ì  íŒë‹¨",
                    speaker: "ì§„",
                    content: "ë²•ì ìœ¼ë¡œëŠ” ìœ ì£„ì§€ë§Œ... ì´ ì‚¬ê±´ì˜ ë³¸ì§ˆì€ ë‹¤ë¥´êµ°ìš”. ì¹˜ë£Œê°€ ìš°ì„ ì´ì—ìš”."
                },
                {
                    image: 'game/images/scenes/drama_14.png',
                    phase: "ğŸ’” Drama - Phase 3: ìš©ì„œì™€ êµ¬ì›",
                    title: "ìƒˆë¡œìš´ ì¶œë°œ",
                    speaker: "ìœ ì§€ë¯¼",
                    content: "ìƒˆ ì§ì¥ì—ì„œ ì•„ì´ë“¤ì„ ê°€ë¥´ì¹˜ê²Œ ëì–´ìš”. ê³¼í•™ì˜ ì•„ë¦„ë‹¤ì›€ì„ ì „í•˜ê³  ì‹¶ì–´ìš”."
                },
                {
                    image: 'game/images/scenes/drama_12.png',
                    phase: "ğŸ’” Drama - Phase 3: ìš©ì„œì™€ êµ¬ì›",
                    title: "í™”í•´",
                    speaker: "í•œê¸°íƒœ",
                    content: "ì´ì œ ìš°ë¦¬ëŠ” ì„œë¡œë¥¼ ì´í•´í•˜ê²Œ ëì–´. ê³¼ê±°ì˜ ìƒì²˜ë„ ì¹˜ìœ ë˜ê³  ìˆê³ ."
                },
                {
                    image: 'game/images/scenes/drama_15.png',
                    phase: "ğŸ’” Drama - Ending",
                    title: "ë§ˆìŒì˜ ì§„ì‹¤",
                    speaker: "ì§„",
                    content: "ì„¸ ì‚¬ëŒ ëª¨ë‘ ìì‹ ë§Œì˜ í‰í™”ë¥¼ ì°¾ì•˜êµ°ìš”. ë•Œë¡œëŠ” ë²•ë³´ë‹¤ ì¸ê°„ì˜ ë§ˆìŒì´ ë” ì¤‘ìš”í•œ ë²•ì´ì£ .",
                    ending: "ë§ˆìŒì˜ ì§„ì‹¤"
                }
            ]
        };

        function showDialogue() {
            let currentData;

            if (selectedPath === null) {
                // ê³µí†µ ë„ì…ë¶€
                if (currentDialogue >= dialogues.common.length) {
                    // ê²½ë¡œ ì„ íƒì´ ì•ˆ ëœ ìƒíƒœë¡œ ê³µí†µ ë¶€ë¶„ì„ ë„˜ì–´ì„°ë‹¤ë©´ ì—ëŸ¬
                    console.error('Path not selected after common scenes');
                    return;
                }
                currentData = dialogues.common[currentDialogue];
            } else {
                // ì„ íƒëœ ê²½ë¡œì˜ ëŒ€ì‚¬
                const pathDialogues = dialogues[selectedPath];
                const adjustedIndex = currentDialogue - dialogues.common.length;

                if (adjustedIndex >= pathDialogues.length) {
                    showGameComplete();
                    return;
                }

                currentData = pathDialogues[adjustedIndex];

                // ë¶„ê¸° í•„í„°ë§
                if (currentData.branch && subBranch !== currentData.branch) {
                    nextDialogue();
                    return;
                }
            }

            // ë°°ê²½ ì´ë¯¸ì§€ í‘œì‹œ
            showDialogueImage(currentData.image);

            // UI ì—…ë°ì´íŠ¸
            document.getElementById('phaseIndicator').textContent = currentData.phase;
            document.getElementById('sceneNumber').textContent = currentData.title;
            document.getElementById('characterName').textContent = currentData.speaker || "ë‚´ë ˆì´ì…˜";
            document.getElementById('dialogueText').innerHTML = currentData.content;

            // ê²½ë¡œ í‘œì‹œê¸° ì—…ë°ì´íŠ¸
            updatePathIndicator();

            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            updateProgress();

            // ì—”ë”© í‘œì‹œ
            if (currentData.ending) {
                showEnding(currentData.ending);
            }

            // ì„ íƒì§€ ì²˜ë¦¬
            if (currentData.choices) {
                showChoices(currentData.choices, currentData.choice_types);
                document.getElementById('vnContinue').style.display = 'none';
            } else {
                hideChoices();
                document.getElementById('vnContinue').style.display = 'flex';
            }
        }

        function showDialogueImage(imagePath) {
            const imageElement = document.getElementById('sceneImage');
            if (imagePath) {
                imageElement.style.display = 'block';
                imageElement.src = imagePath;
                imageElement.onload = () => console.log(`âœ… Image loaded: ${imagePath}`);
                imageElement.onerror = () => {
                    console.log(`âš ï¸ Image not found: ${imagePath}, using fallback`);
                    imageElement.src = 'game/images/scenes/scene_01.png';
                };
            }
        }

        function showChoices(choices, choiceTypes) {
            const choicesDiv = document.getElementById('vnChoices');
            choicesDiv.innerHTML = '';
            choicesDiv.style.display = 'block';

            choices.forEach((choice, index) => {
                const choiceDiv = document.createElement('div');
                choiceDiv.className = 'vn-choice';

                if (choiceTypes) {
                    const choiceType = choiceTypes[index];
                    if (['detective', 'evidence_route', 'interrogation_route'].includes(choiceType)) {
                        choiceDiv.classList.add('choice-detective');
                    } else if (['conspiracy', 'government_route', 'corporate_route'].includes(choiceType)) {
                        choiceDiv.classList.add('choice-conspiracy');
                    } else if (['drama', 'emotional_route', 'relationship_route'].includes(choiceType)) {
                        choiceDiv.classList.add('choice-drama');
                    }
                }

                choiceDiv.textContent = choice;
                choiceDiv.onclick = () => handleChoice(index, choiceTypes);
                choicesDiv.appendChild(choiceDiv);
            });
        }

        function hideChoices() {
            document.getElementById('vnChoices').style.display = 'none';
        }

        function handleChoice(choiceIndex, choiceTypes) {
            if (choiceTypes) {
                const choiceType = choiceTypes[choiceIndex];

                // ë©”ì¸ ê²½ë¡œ ì„ íƒ
                if (['detective', 'conspiracy', 'drama'].includes(choiceType)) {
                    selectedPath = choiceType;
                    currentDialogue = dialogues.common.length;
                } else {
                    // ì„œë¸Œ ë¶„ê¸° ì„¤ì •
                    subBranch = choiceType;
                }

                // ì„ íƒ í”¼ë“œë°± í‘œì‹œ
                showChoiceFeedback(choiceType);
            }

            setTimeout(() => {
                nextDialogue();
            }, 1500);
        }

        function showChoiceFeedback(choiceType) {
            // ê²½ë¡œ í‘œì‹œ ê¸°ëŠ¥ ì œê±° - ì„ íƒ í”¼ë“œë°± ì—†ìŒ
            return;
        }

        function updatePathIndicator() {
            // ê²½ë¡œ í‘œì‹œ ê¸°ëŠ¥ ì œê±°
            const pathIndicator = document.getElementById('pathIndicator');
            if (pathIndicator) {
                pathIndicator.style.display = 'none';
            }
            return;
        }

        function updateProgress() {
            let totalScenes;
            let currentProgress;

            if (selectedPath === null) {
                totalScenes = dialogues.common.length;
                currentProgress = currentDialogue + 1;
            } else {
                totalScenes = dialogues.common.length + dialogues[selectedPath].length;
                currentProgress = dialogues.common.length + (currentDialogue - dialogues.common.length) + 1;
            }

            const progress = (currentProgress / totalScenes) * 100;
            document.getElementById('progressBar').style.width = Math.min(progress, 100) + '%';
        }

        function showEnding(endingTitle) {
            const endingDiv = document.getElementById('endingTitle');
            endingDiv.textContent = endingTitle;
            endingDiv.classList.remove('hidden');

            setTimeout(() => {
                endingDiv.classList.add('hidden');
            }, 3000);
        }

        function showGameComplete() {
            document.getElementById('vnContinue').innerHTML = '<div class="continue-indicator">ğŸ”„</div>';
            document.getElementById('vnContinue').onclick = () => restartGame();

            const dialogueBox = document.querySelector('.vn-dialogue-box .vn-text');
            dialogueBox.innerHTML = `
                <strong>ê²Œì„ ì™„ë£Œ!</strong><br>
                ë‹¤ë¥¸ ê²½ë¡œë¥¼ ì„ íƒí•´ì„œ ë‹¤ë¥¸ ì—”ë”©ì„ ê²½í—˜í•´ë³´ì„¸ìš”.<br>
                ğŸ”„ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤.
            `;
        }

        function nextDialogue() {
            currentDialogue++;
            showDialogue();
        }

        function restartGame() {
            currentDialogue = 0;
            selectedPath = null;
            subBranch = null;

            // UI ì´ˆê¸°í™”
            document.getElementById('pathIndicator').style.display = 'none';
            document.getElementById('endingTitle').classList.add('hidden');

            // ê³„ì†í•˜ê¸° ë²„íŠ¼ ë³µì›
            document.getElementById('vnContinue').innerHTML = '<div class="continue-indicator">â–¶</div>';
            document.getElementById('vnContinue').onclick = () => nextDialogue();

            showDialogue();
        }

        // ê²Œì„ ì‹œì‘
        showDialogue();
    </script>
</body>
</html>